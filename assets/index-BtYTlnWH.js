(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=Array.isArray,t=Array.prototype.indexOf,n=Array.from;Object.keys;var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,o=Object.prototype,s=Array.prototype,c=Object.getPrototypeOf,l=Object.isExtensible;function u(e){return typeof e==`function`}const d=()=>{};function f(e){return e()}function p(e){for(var t=0;t<e.length;t++)e[t]()}function m(){var e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}const h=1024,g=2048,_=4096,v=8192,y=65536,b=1<<19,x=1<<20,S=1<<21,C=1<<23,w=Symbol(`$state`),ee=Symbol(`legacy props`),te=Symbol(``),T=new class extends Error{name=`StaleReactionError`;message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function E(e){throw Error(`https://svelte.dev/e/lifecycle_outside_component`)}function ne(){throw Error(`https://svelte.dev/e/async_derived_orphan`)}function re(e){throw Error(`https://svelte.dev/e/effect_in_teardown`)}function ie(){throw Error(`https://svelte.dev/e/effect_in_unowned_derived`)}function ae(e){throw Error(`https://svelte.dev/e/effect_orphan`)}function oe(){throw Error(`https://svelte.dev/e/effect_update_depth_exceeded`)}function se(e){throw Error(`https://svelte.dev/e/lifecycle_legacy_only`)}function ce(e){throw Error(`https://svelte.dev/e/props_invalid_value`)}function le(){throw Error(`https://svelte.dev/e/state_descriptors_fixed`)}function ue(){throw Error(`https://svelte.dev/e/state_prototype_fixed`)}function de(){throw Error(`https://svelte.dev/e/state_unsafe_mutation`)}function fe(){throw Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`)}const pe={},D=Symbol();function me(e){console.warn(`https://svelte.dev/e/hydration_mismatch`)}function he(){console.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`)}let O=!1;function ge(e){O=e}let k;function A(e){if(e===null)throw me(),pe;return k=e}function _e(){return A(jt(k))}function j(e){if(O){if(jt(k)!==null)throw me(),pe;k=e}}function ve(e=1){if(O){for(var t=e,n=k;t--;)n=jt(n);k=n}}function ye(e=!0){for(var t=0,n=k;;){if(n.nodeType===8){var r=n.data;if(r===`]`){if(t===0)return n;--t}else (r===`[`||r===`[!`)&&(t+=1)}var i=jt(n);e&&n.remove(),n=i}}function be(e){if(!e||e.nodeType!==8)throw me(),pe;return e.data}function xe(e){return e===this.v}function Se(e,t){return e==e?e!==t||typeof e==`object`&&!!e||typeof e==`function`:t==t}function Ce(e){return!Se(e,this.v)}let we=!1;function Te(){we=!0}let M=null;function Ee(e){M=e}function De(e,t=!1,n){M={p:M,c:null,e:null,s:e,x:null,l:we&&!t?{s:null,u:null,$:[]}:null}}function Oe(e){var t=M,n=t.e;if(n!==null){t.e=null;for(var r of n)Gt(r)}return e!==void 0&&(t.x=e),M=t.p,e??{}}function ke(){return!we||M!==null&&M.l===null}var Ae=[];function je(){var e=Ae;Ae=[],p(e)}function Me(e){if(Ae.length===0&&!We){var t=Ae;queueMicrotask(()=>{t===Ae&&je()})}Ae.push(e)}function Ne(){for(;Ae.length>0;)je()}var Pe=new WeakMap;function Fe(e){var t=U;if(t===null)return V.f|=C,e;if(t.f&32768)Ie(e,t);else{if(!(t.f&128))throw!t.parent&&e instanceof Error&&Le(e),e;t.b.error(e)}}function Ie(e,t){for(;t!==null;){if(t.f&128)try{t.b.error(e);return}catch(t){e=t}t=t.parent}throw e instanceof Error&&Le(e),e}function Le(e){let t=Pe.get(e);t&&(r(e,`message`,{value:t.message}),r(e,`stack`,{value:t.stack}))}var Re=new Set;let N=null,ze=null,P=null,Be=new Set;var Ve=[],He=null,Ue=!1;let We=!1;var Ge=class e{current=new Map;#previous=new Map;#callbacks=new Set;#pending=0;#deferred=null;#boundary_async_effects=[];#render_effects=[];#effects=[];#block_effects=[];#dirty_effects=[];#maybe_dirty_effects=[];skipped_effects=new Set;process(e){Ve=[],ze=null,this.apply();for(let t of e)this.#traverse_effect_tree(t);if(this.#pending===0){var t=P;this.#commit();var n=this.#render_effects,r=this.#effects;this.#render_effects=[],this.#effects=[],this.#block_effects=[],ze=this,N=null,P=t,Xe(n),Xe(r),ze=null,this.#deferred?.resolve()}else this.#defer_effects(this.#render_effects),this.#defer_effects(this.#effects),this.#defer_effects(this.#block_effects);P=null;for(let e of this.#boundary_async_effects)Mn(e);this.#boundary_async_effects=[]}#traverse_effect_tree(e){e.f^=h;for(var t=e.first;t!==null;){var n=t.f,r=(n&96)!=0;if(!(r&&n&1024||n&8192||this.skipped_effects.has(t))&&t.fn!==null){r?t.f^=h:n&4?this.#effects.push(t):n&1024||(n&4194304&&t.b?.is_pending()?this.#boundary_async_effects.push(t):Dn(t)&&(t.f&16&&this.#block_effects.push(t),Mn(t)));var i=t.first;if(i!==null){t=i;continue}}var a=t.parent;for(t=t.next;t===null&&a!==null;)t=a.next,a=a.parent}}#defer_effects(e){for(let t of e)(t.f&2048?this.#dirty_effects:this.#maybe_dirty_effects).push(t),J(t,h);e.length=0}capture(e,t){this.#previous.has(e)||this.#previous.set(e,t),this.current.set(e,e.v),P?.set(e,e.v)}activate(){N=this}deactivate(){N=null,P=null}flush(){if(Ve.length>0){if(this.activate(),qe(),N!==null&&N!==this)return}else this.#pending===0&&this.#commit();this.deactivate();for(let e of Be)if(Be.delete(e),e(),N!==null)break}#commit(){for(let e of this.#callbacks)e();if(this.#callbacks.clear(),Re.size>1){this.#previous.clear();let e=!0;for(let t of Re){if(t===this){e=!1;continue}let n=[];for(let[r,i]of this.current){if(t.current.has(r))if(e&&i!==t.current.get(r))t.current.set(r,i);else continue;n.push(r)}if(n.length===0)continue;let r=[...t.current.keys()].filter(e=>!this.current.has(e));if(r.length>0){for(let e of n)Ze(e,r);if(Ve.length>0){N=t,t.apply();for(let e of Ve)t.#traverse_effect_tree(e);Ve=[],t.deactivate()}}}N=null}Re.delete(this)}increment(){this.#pending+=1}decrement(){--this.#pending;for(let e of this.#dirty_effects)J(e,g),$e(e);for(let e of this.#maybe_dirty_effects)J(e,_),$e(e);this.flush()}add_callback(e){this.#callbacks.add(e)}settled(){return(this.#deferred??=m()).promise}static ensure(){if(N===null){let t=N=new e;Re.add(N),We||e.enqueue(()=>{N===t&&t.flush()})}return N}static enqueue(e){Me(e)}apply(){}};function Ke(e){var t=We;We=!0;try{var n;for(e&&(N!==null&&qe(),n=e());;){if(Ne(),Ve.length===0&&(N?.flush(),Ve.length===0))return He=null,n;qe()}}finally{We=t}}function qe(){var e=fn;Ue=!0;try{var t=0;for(pn(!0);Ve.length>0;){var n=Ge.ensure();t++>1e3&&Je(),n.process(Ve),gt.clear()}}finally{Ue=!1,pn(e),He=null}}function Je(){try{oe()}catch(e){Ie(e,He)}}let Ye=null;function Xe(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&24576)&&Dn(r)&&(Ye=[],Mn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?on(r):r.fn=null),Ye?.length>0)){gt.clear();for(let e of Ye)Mn(e);Ye=[]}}Ye=null}}function Ze(e,t){if(e.reactions!==null)for(let n of e.reactions){let e=n.f;e&2?Ze(n,t):e&4194320&&Qe(n,t)&&(J(n,g),$e(n))}}function Qe(e,t){if(e.deps!==null){for(let n of e.deps)if(t.includes(n)||n.f&2&&Qe(n,t))return!0}return!1}function $e(e){for(var t=He=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ue&&t===U&&n&16)return;if(n&96){if(!(n&1024))return;t.f^=h}}Ve.push(t)}function et(e){let t=0,n=_t(0),r;return()=>{Ht()&&(q(n),Qt(()=>(t===0&&(r=Fn(()=>e(()=>xt(n)))),t+=1,()=>{Me(()=>{--t,t===0&&(r?.(),r=void 0,xt(n))})})))}}var tt=b|65664;function nt(e,t,n){new rt(e,t,n)}var rt=class{parent;#pending=!1;#anchor;#hydrate_open=O?k:null;#props;#children;#effect;#main_effect=null;#pending_effect=null;#failed_effect=null;#offscreen_fragment=null;#local_pending_count=0;#pending_count=0;#is_creating_fallback=!1;#effect_pending=null;#effect_pending_update=()=>{this.#effect_pending&&yt(this.#effect_pending,this.#local_pending_count)};#effect_pending_subscriber=et(()=>(this.#effect_pending=_t(this.#local_pending_count),()=>{this.#effect_pending=null}));constructor(e,t,n){this.#anchor=e,this.#props=t,this.#children=n,this.parent=U.b,this.#pending=!!this.#props.pending,this.#effect=en(()=>{if(U.b=this,O){let e=this.#hydrate_open;_e(),e.nodeType===8&&e.data===`[!`?this.#hydrate_pending_content():this.#hydrate_resolved_content()}else{try{this.#main_effect=z(()=>n(this.#anchor))}catch(e){this.error(e)}this.#pending_count>0?this.#show_pending_snippet():this.#pending=!1}},tt),O&&(this.#anchor=k)}#hydrate_resolved_content(){try{this.#main_effect=z(()=>this.#children(this.#anchor))}catch(e){this.error(e)}this.#pending=!1}#hydrate_pending_content(){let e=this.#props.pending;e&&(this.#pending_effect=z(()=>e(this.#anchor)),Ge.enqueue(()=>{this.#main_effect=this.#run(()=>(Ge.ensure(),z(()=>this.#children(this.#anchor)))),this.#pending_count>0?this.#show_pending_snippet():(sn(this.#pending_effect,()=>{this.#pending_effect=null}),this.#pending=!1)}))}is_pending(){return this.#pending||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#props.pending}#run(e){var t=U,n=V,r=M;_n(this.#effect),H(this.#effect),Ee(this.#effect.ctx);try{return e()}catch(e){return Fe(e),null}finally{_n(t),H(n),Ee(r)}}#show_pending_snippet(){let e=this.#props.pending;this.#main_effect!==null&&(this.#offscreen_fragment=document.createDocumentFragment(),it(this.#main_effect,this.#offscreen_fragment)),this.#pending_effect===null&&(this.#pending_effect=z(()=>e(this.#anchor)))}#update_pending_count(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#update_pending_count(e);return}this.#pending_count+=e,this.#pending_count===0&&(this.#pending=!1,this.#pending_effect&&sn(this.#pending_effect,()=>{this.#pending_effect=null}),this.#offscreen_fragment&&=(this.#anchor.before(this.#offscreen_fragment),null),Me(()=>{Ge.ensure().flush()}))}update_pending_count(e){this.#update_pending_count(e),this.#local_pending_count+=e,Be.add(this.#effect_pending_update)}get_effect_pending(){return this.#effect_pending_subscriber(),q(this.#effect_pending)}error(e){var t=this.#props.onerror;let n=this.#props.failed;if(this.#is_creating_fallback||!t&&!n)throw e;this.#main_effect&&=(B(this.#main_effect),null),this.#pending_effect&&=(B(this.#pending_effect),null),this.#failed_effect&&=(B(this.#failed_effect),null),O&&(A(this.#hydrate_open),ve(),A(ye()));var r=!1,i=!1;let a=()=>{if(r){he();return}r=!0,i&&fe(),Ge.ensure(),this.#local_pending_count=0,this.#failed_effect!==null&&sn(this.#failed_effect,()=>{this.#failed_effect=null}),this.#pending=this.has_pending_snippet(),this.#main_effect=this.#run(()=>(this.#is_creating_fallback=!1,z(()=>this.#children(this.#anchor)))),this.#pending_count>0?this.#show_pending_snippet():this.#pending=!1};var o=V;try{H(null),i=!0,t?.(e,a),i=!1}catch(e){Ie(e,this.#effect&&this.#effect.parent)}finally{H(o)}n&&Me(()=>{this.#failed_effect=this.#run(()=>{this.#is_creating_fallback=!0;try{return z(()=>{n(this.#anchor,()=>e,()=>a)})}catch(e){return Ie(e,this.#effect.parent),null}finally{this.#is_creating_fallback=!1}})})}};function it(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:jt(n);t.append(n),n=i}}function at(e,t,n){let r=ke()?ct:dt;if(t.length===0){n(e.map(r));return}var i=N,a=U,o=ot(),s=O;Promise.all(t.map(e=>lt(e))).then(t=>{o();try{n([...e.map(r),...t])}catch(e){a.f&16384||Ie(e,a)}s&&ge(!1),i?.deactivate(),st()}).catch(e=>{Ie(e,a)})}function ot(){var e=U,t=V,n=M,r=N,i=O;if(i)var a=k;return function(){_n(e),H(t),Ee(n),r?.activate(),i&&(ge(!0),A(a))}}function st(){_n(null),H(null),Ee(null)}function ct(e){var t=2|g,n=V!==null&&V.f&2?V:null;return U===null||n!==null&&n.f&256?t|=256:U.f|=b,{ctx:M,deps:null,effects:null,equals:xe,f:t,fn:e,reactions:null,rv:0,v:D,wv:0,parent:n??U,ac:null}}function lt(e,t){let n=U;n===null&&ne();var r=n.b,i=void 0,a=_t(D),o=!V,s=new Map;return Zt(()=>{var t=m();i=t.promise;try{Promise.resolve(e()).then(t.resolve,t.reject).then(st)}catch(e){t.reject(e),st()}var n=N,c=r.is_pending();o&&(r.update_pending_count(1),c||(n.increment(),s.get(n)?.reject(T),s.delete(n),s.set(n,t)));let l=(e,t=void 0)=>{if(c||n.activate(),t)t!==T&&(a.f|=C,yt(a,t));else{a.f&8388608&&(a.f^=C),yt(a,e);for(let[e,t]of s){if(s.delete(e),e===n)break;t.reject(T)}}o&&(r.update_pending_count(-1),c||n.decrement())};t.promise.then(l,e=>l(null,e||`unknown`))}),Ut(()=>{for(let e of s.values())e.reject(T)}),new Promise(e=>{function t(n){function r(){n===i?e(a):t(i)}n.then(r,r)}t(i)})}function ut(e){let t=ct(e);return yn(t),t}function dt(e){let t=ct(e);return t.equals=Ce,t}function ft(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)B(t[n])}}function pt(e){for(var t=e.parent;t!==null;){if(!(t.f&2))return t;t=t.parent}return null}function mt(e){var t,n=U;_n(pt(e));try{ft(e),t=kn(e)}finally{_n(n)}return t}function ht(e){var t=mt(e);if(e.equals(t)||(e.v=t,e.wv=En()),!mn)if(P!==null)P.set(e,e.v);else{var n=(Tn||e.f&256)&&e.deps!==null?_:h;J(e,n)}}const gt=new Map;function _t(e,t){return{f:0,v:e,reactions:null,equals:xe,rv:0,wv:0}}function F(e,t){let n=_t(e,t);return yn(n),n}function vt(e,t=!1,n=!0){let r=_t(e);return t||(r.equals=Ce),we&&n&&M!==null&&M.l!==null&&(M.l.s??=[]).push(r),r}function I(e,t,n=!1){V!==null&&(!gn||V.f&131072)&&ke()&&V.f&4325394&&!vn?.includes(e)&&de();let r=n?Ct(t):t;return yt(e,r)}function yt(e,t){if(!e.equals(t)){var n=e.v;mn?gt.set(e,t):gt.set(e,n),e.v=t,Ge.ensure().capture(e,n),e.f&2&&(e.f&2048&&mt(e),J(e,e.f&256?_:h)),e.wv=En(),St(e,g),ke()&&U!==null&&U.f&1024&&!(U.f&96)&&(K===null?bn([e]):K.push(e))}return t}function bt(e,t=1){var n=q(e),r=t===1?n++:n--;return I(e,n),r}function xt(e){I(e,e.v+1)}function St(e,t){var n=e.reactions;if(n!==null)for(var r=ke(),i=n.length,a=0;a<i;a++){var o=n[a],s=o.f;if(!(!r&&o===U)){var c=(s&g)===0;c&&J(o,t),s&2?St(o,_):c&&(s&16&&Ye!==null&&Ye.push(o),$e(o))}}}function Ct(t){if(typeof t!=`object`||!t||w in t)return t;let n=c(t);if(n!==o&&n!==s)return t;var r=new Map,a=e(t),l=F(0),u=null,d=Cn,f=e=>{if(Cn===d)return e();var t=V,n=Cn;H(null),wn(d);var r=e();return H(t),wn(n),r};return a&&r.set(`length`,F(t.length,u)),new Proxy(t,{defineProperty(e,t,n){(!(`value`in n)||n.configurable===!1||n.enumerable===!1||n.writable===!1)&&le();var i=r.get(t);return i===void 0?i=f(()=>{var e=F(n.value,u);return r.set(t,e),e}):I(i,n.value,!0),!0},deleteProperty(e,t){var n=r.get(t);if(n===void 0){if(t in e){let e=f(()=>F(D,u));r.set(t,e),xt(l)}}else I(n,D),xt(l);return!0},get(e,n,a){if(n===w)return t;var o=r.get(n),s=n in e;if(o===void 0&&(!s||i(e,n)?.writable)&&(o=f(()=>{var t=Ct(s?e[n]:D);return F(t,u)}),r.set(n,o)),o!==void 0){var c=q(o);return c===D?void 0:c}return Reflect.get(e,n,a)},getOwnPropertyDescriptor(e,t){var n=Reflect.getOwnPropertyDescriptor(e,t);if(n&&`value`in n){var i=r.get(t);i&&(n.value=q(i))}else if(n===void 0){var a=r.get(t),o=a?.v;if(a!==void 0&&o!==D)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return n},has(e,t){if(t===w)return!0;var n=r.get(t),a=n!==void 0&&n.v!==D||Reflect.has(e,t);return(n!==void 0||U!==null&&(!a||i(e,t)?.writable))&&(n===void 0&&(n=f(()=>{var n=a?Ct(e[t]):D;return F(n,u)}),r.set(t,n)),q(n)===D)?!1:a},set(e,t,n,o){var s=r.get(t),c=t in e;if(a&&t===`length`)for(var d=n;d<s.v;d+=1){var p=r.get(d+``);p===void 0?d in e&&(p=f(()=>F(D,u)),r.set(d+``,p)):I(p,D)}if(s===void 0)(!c||i(e,t)?.writable)&&(s=f(()=>F(void 0,u)),I(s,Ct(n)),r.set(t,s));else{c=s.v!==D;var m=f(()=>Ct(n));I(s,m)}var h=Reflect.getOwnPropertyDescriptor(e,t);if(h?.set&&h.set.call(o,n),!c){if(a&&typeof t==`string`){var g=r.get(`length`),_=Number(t);Number.isInteger(_)&&_>=g.v&&I(g,_+1)}xt(l)}return!0},ownKeys(e){q(l);var t=Reflect.ownKeys(e).filter(e=>{var t=r.get(e);return t===void 0||t.v!==D});for(var[n,i]of r)i.v!==D&&!(n in e)&&t.push(n);return t},setPrototypeOf(){ue()}})}var wt,Tt,Et,Dt;function Ot(){if(wt===void 0){wt=window,document,Tt=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Et=i(t,`firstChild`).get,Dt=i(t,`nextSibling`).get,l(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),l(n)&&(n.__t=void 0)}}function kt(e=``){return document.createTextNode(e)}function At(e){return Et.call(e)}function jt(e){return Dt.call(e)}function L(e,t){if(!O)return At(e);var n=At(k);if(n===null)n=k.appendChild(kt());else if(t&&n.nodeType!==3){var r=kt();return n?.before(r),A(r),r}return A(n),n}function Mt(e,t=!1){if(!O){var n=At(e);return n instanceof Comment&&n.data===``?jt(n):n}if(t&&k?.nodeType!==3){var r=kt();return k?.before(r),A(r),r}return k}function R(e,t=1,n=!1){let r=O?k:e;for(var i;t--;)i=r,r=jt(r);if(!O)return r;if(n&&r?.nodeType!==3){var a=kt();return r===null?i?.after(a):r.before(a),A(a),a}return A(r),r}function Nt(e){e.textContent=``}function Pt(){return!1}var Ft=!1;function It(){Ft||(Ft=!0,document.addEventListener(`reset`,e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(let t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Lt(e){var t=V,n=U;H(null),_n(null);try{return e()}finally{H(t),_n(n)}}function Rt(e,t,n,r=n){e.addEventListener(t,()=>Lt(n));let i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),It()}function zt(e){U===null&&V===null&&ae(e),V!==null&&V.f&256&&U===null&&ie(),mn&&re(e)}function Bt(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Vt(e,t,n,r=!0){var i=U;i!==null&&i.f&8192&&(e|=v);var a={ctx:M,deps:null,nodes_start:null,nodes_end:null,f:e|g,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Mn(a),a.f|=32768}catch(e){throw B(a),e}else t!==null&&$e(a);if(r){var o=a;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&!(o.f&524288)&&(o=o.first),o!==null&&(o.parent=i,i!==null&&Bt(o,i),V!==null&&V.f&2&&!(e&64))){var s=V;(s.effects??=[]).push(o)}}return a}function Ht(){return V!==null&&!gn}function Ut(e){let t=Vt(8,null,!1);return J(t,h),t.teardown=e,t}function Wt(e){zt(`$effect`);var t=U.f;if(!V&&t&32&&!(t&32768)){var n=M;(n.e??=[]).push(e)}else return Gt(e)}function Gt(e){return Vt(4|x,e,!1)}function Kt(e){return zt(`$effect.pre`),Vt(8|x,e,!0)}function qt(e){Ge.ensure();let t=Vt(64|b,e,!0);return(e={})=>new Promise(n=>{e.outro?sn(t,()=>{B(t),n(void 0)}):(B(t),n(void 0))})}function Jt(e){return Vt(4,e,!1)}function Yt(e,t){var n=M,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=Qt(()=>{e(),!r.ran&&(r.ran=!0,Fn(t))})}function Xt(){var e=M;Qt(()=>{for(var t of e.l.$){t.deps();var n=t.effect;n.f&1024&&J(n,_),Dn(n)&&Mn(n),t.ran=!1}})}function Zt(e){return Vt(4194304|b,e,!0)}function Qt(e,t=0){return Vt(8|t,e,!0)}function $t(e,t=[],n=[]){at(t,n,t=>{Vt(8,()=>e(...t.map(q)),!0)})}function en(e,t=0){return Vt(16|t,e,!0)}function z(e,t=!0){return Vt(32|b,e,!0,t)}function tn(e){var t=e.teardown;if(t!==null){let e=mn,n=V;hn(!0),H(null);try{t.call(null)}finally{hn(e),H(n)}}}function nn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){let e=n.ac;e!==null&&Lt(()=>{e.abort(T)});var r=n.next;n.f&64?n.parent=null:B(n,t),n=r}}function rn(e){for(var t=e.first;t!==null;){var n=t.next;t.f&32||B(t),t=n}}function B(e,t=!0){var n=!1;(t||e.f&262144)&&e.nodes_start!==null&&e.nodes_end!==null&&(an(e.nodes_start,e.nodes_end),n=!0),nn(e,t&&!n),jn(e,0),J(e,16384);var r=e.transitions;if(r!==null)for(let e of r)e.stop();tn(e);var i=e.parent;i!==null&&i.first!==null&&on(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function an(e,t){for(;e!==null;){var n=e===t?null:jt(e);e.remove(),e=n}}function on(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function sn(e,t){var n=[];ln(e,n,!0),cn(n,()=>{B(e),t&&t()})}function cn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function ln(e,t,n){if(!(e.f&8192)){if(e.f^=v,e.transitions!==null)for(let r of e.transitions)(r.is_global||n)&&t.push(r);for(var r=e.first;r!==null;){var i=r.next,a=(r.f&65536)!=0||(r.f&32)!=0;ln(r,t,a?n:!1),r=i}}}function un(e){dn(e,!0)}function dn(e,t){if(e.f&8192){e.f^=v,e.f&1024||(J(e,g),$e(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&65536)!=0||(n.f&32)!=0;dn(n,i?t:!1),n=r}if(e.transitions!==null)for(let n of e.transitions)(n.is_global||t)&&n.in()}}let fn=!1;function pn(e){fn=e}let mn=!1;function hn(e){mn=e}let V=null,gn=!1;function H(e){V=e}let U=null;function _n(e){U=e}let vn=null;function yn(e){V!==null&&(vn===null?vn=[e]:vn.push(e))}var W=null,G=0;let K=null;function bn(e){K=e}let xn=1;var Sn=0;let Cn=Sn;function wn(e){Cn=e}let Tn=!1;function En(){return++xn}function Dn(e){var t=e.f;if(t&2048)return!0;if(t&4096){var n=e.deps,r=(t&256)!=0;if(n!==null){var i,a,o=(t&512)!=0,s=r&&U!==null&&!Tn,c=n.length;if((o||s)&&(U===null||!(U.f&16384))){var l=e,u=l.parent;for(i=0;i<c;i++)a=n[i],(o||!a?.reactions?.includes(l))&&(a.reactions??=[]).push(l);o&&(l.f^=512),s&&u!==null&&!(u.f&256)&&(l.f^=256)}for(i=0;i<c;i++)if(a=n[i],Dn(a)&&ht(a),a.wv>e.wv)return!0}(!r||U!==null&&!Tn)&&J(e,h)}return!1}function On(e,t,n=!0){var r=e.reactions;if(r!==null&&!vn?.includes(e))for(var i=0;i<r.length;i++){var a=r[i];a.f&2?On(a,t,!1):t===a&&(n?J(a,g):a.f&1024&&J(a,_),$e(a))}}function kn(e){var t=W,n=G,r=K,i=V,a=Tn,o=vn,s=M,c=gn,l=Cn,u=e.f;W=null,G=0,K=null,Tn=(u&256)!=0&&(gn||!fn||V===null),V=u&96?null:e,vn=null,Ee(e.ctx),gn=!1,Cn=++Sn,e.ac!==null&&(Lt(()=>{e.ac.abort(T)}),e.ac=null);try{e.f|=S;var d=e.fn,f=d(),p=e.deps;if(W!==null){var m;if(jn(e,G),p!==null&&G>0)for(p.length=G+W.length,m=0;m<W.length;m++)p[G+m]=W[m];else e.deps=p=W;if(!Tn||u&2&&e.reactions!==null)for(m=G;m<p.length;m++)(p[m].reactions??=[]).push(e)}else p!==null&&G<p.length&&(jn(e,G),p.length=G);if(ke()&&K!==null&&!gn&&p!==null&&!(e.f&6146))for(m=0;m<K.length;m++)On(K[m],e);return i!==null&&i!==e&&(Sn++,K!==null&&(r===null?r=K:r.push(...K))),e.f&8388608&&(e.f^=C),f}catch(e){return Fe(e)}finally{e.f^=S,W=t,G=n,K=r,V=i,Tn=a,vn=o,Ee(s),gn=c,Cn=l}}function An(e,n){let r=n.reactions;if(r!==null){var i=t.call(r,e);if(i!==-1){var a=r.length-1;a===0?r=n.reactions=null:(r[i]=r[a],r.pop())}}r===null&&n.f&2&&(W===null||!W.includes(n))&&(J(n,_),n.f&768||(n.f^=512),ft(n),jn(n,0))}function jn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)An(e,n[r])}function Mn(e){var t=e.f;if(!(t&16384)){J(e,h);var n=U,r=fn;U=e,fn=!0;try{t&16?rn(e):nn(e),tn(e);var i=kn(e);e.teardown=typeof i==`function`?i:null,e.wv=xn}finally{fn=r,U=n}}}async function Nn(){await Promise.resolve(),Ke()}function q(e){var t=(e.f&2)!=0;if(null?.add(e),V!==null&&!gn){if(!(U!==null&&U.f&16384)&&!vn?.includes(e)){var n=V.deps;if(V.f&2097152)e.rv<Sn&&(e.rv=Sn,W===null&&n!==null&&n[G]===e?G++:W===null?W=[e]:(!Tn||!W.includes(e))&&W.push(e));else{(V.deps??=[]).push(e);var r=e.reactions;r===null?e.reactions=[V]:r.includes(V)||r.push(V)}}}else if(t&&e.deps===null&&e.effects===null){var i=e,a=i.parent;a!==null&&!(a.f&256)&&(i.f^=256)}if(mn){if(gt.has(e))return gt.get(e);if(t){i=e;var o=i.v;return(!(i.f&1024)&&i.reactions!==null||Pn(i))&&(o=mt(i)),gt.set(i,o),o}}else if(t){if(i=e,P?.has(i))return P.get(i);Dn(i)&&ht(i)}if(P?.has(e))return P.get(e);if(e.f&8388608)throw e.v;return e.v}function Pn(e){if(e.v===D)return!0;if(e.deps===null)return!1;for(let t of e.deps)if(gt.has(t)||t.f&2&&Pn(t))return!0;return!1}function Fn(e){var t=gn;try{return gn=!0,e()}finally{gn=t}}var In=~(_|3072);function J(e,t){e.f=e.f&In|t}function Ln(e){if(!(typeof e!=`object`||!e||e instanceof EventTarget)){if(w in e)Rn(e);else if(!Array.isArray(e))for(let t in e){let n=e[t];typeof n==`object`&&n&&w in n&&Rn(n)}}}function Rn(e,t=new Set){if(typeof e==`object`&&e&&!(e instanceof EventTarget)&&!t.has(e)){for(let n in t.add(e),e instanceof Date&&e.getTime(),e)try{Rn(e[n],t)}catch{}let n=c(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){let t=a(n);for(let n in t){let r=t[n].get;if(r)try{r.call(e)}catch{}}}}}[...`allowfullscreen.async.autofocus.autoplay.checked.controls.default.disabled.formnovalidate.indeterminate.inert.ismap.loop.multiple.muted.nomodule.novalidate.open.playsinline.readonly.required.reversed.seamless.selected.webkitdirectory.defer.disablepictureinpicture.disableremoteplayback`.split(`.`)];var zn=[`touchstart`,`touchmove`];function Bn(e){return zn.includes(e)}const Vn=new Set,Hn=new Set;function Un(e){for(var t=0;t<e.length;t++)Vn.add(e[t]);for(var n of Hn)n(e)}var Wn=null;function Gn(t){var n=this,i=n.ownerDocument,a=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;Wn=t;var c=0,l=Wn===t&&t.__root;if(l){var u=o.indexOf(l);if(u!==-1&&(n===document||n===window)){t.__root=n;return}var d=o.indexOf(n);if(d===-1)return;u<=d&&(c=u)}if(s=o[c]||t.target,s!==n){r(t,`currentTarget`,{configurable:!0,get(){return s||i}});var f=V,p=U;H(null),_n(null);try{for(var m,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var _=s[`__`+a];if(_!=null&&(!s.disabled||t.target===s))if(e(_)){var[v,...y]=_;v.apply(s,[t,...y])}else _.call(s,t)}catch(e){m?h.push(e):m=e}if(t.cancelBubble||g===n||g===null)break;s=g}if(m){for(let e of h)queueMicrotask(()=>{throw e});throw m}}finally{t.__root=n,delete t.currentTarget,H(f),_n(p)}}}function Kn(e){var t=document.createElement(`template`);return t.innerHTML=e.replaceAll(`<!>`,`<!---->`),t.content}function qn(e,t){var n=U;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Y(e,t){var n=(t&1)!=0,r=(t&2)!=0,i,a=!e.startsWith(`<!>`);return()=>{if(O)return qn(k,null),k;i===void 0&&(i=Kn(a?e:`<!>`+e),n||(i=At(i)));var t=r||Tt?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=At(t),s=t.lastChild;qn(o,s)}else qn(t,t);return t}}function Jn(e,t,n=`svg`){var r=!e.startsWith(`<!>`),i=(t&1)!=0,a=`<${n}>${r?e:`<!>`+e}</${n}>`,o;return()=>{if(O)return qn(k,null),k;if(!o){var e=Kn(a),t=At(e);if(i)for(o=document.createDocumentFragment();At(t);)o.appendChild(At(t));else o=At(t)}var n=o.cloneNode(!0);if(i){var r=At(n),s=n.lastChild;qn(r,s)}else qn(n,n);return n}}function Yn(e,t){return Jn(e,t,`svg`)}function Xn(){if(O)return qn(k,null),k;var e=document.createDocumentFragment(),t=document.createComment(``),n=kt();return e.append(t,n),qn(t,n),e}function X(e,t){if(O){U.nodes_end=k,_e();return}e!==null&&e.before(t)}let Zn=!0;function Qn(e,t){var n=t==null?``:typeof t==`object`?t+``:t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+``)}function $n(e,t){return tr(e,t)}var er=new Map;function tr(e,{target:t,anchor:r,props:i={},events:a,context:o,intro:s=!0}){Ot();var c=new Set,l=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!c.has(r)){c.add(r);var i=Bn(r);t.addEventListener(r,Gn,{passive:i});var a=er.get(r);a===void 0?(document.addEventListener(r,Gn,{passive:i}),er.set(r,1)):er.set(r,a+1)}}};l(n(Vn)),Hn.add(l);var u=void 0,d=qt(()=>{var n=r??t.appendChild(kt());return nt(n,{pending:()=>{}},t=>{if(o){De({});var n=M;n.c=o}if(a&&(i.$$events=a),O&&qn(t,null),Zn=s,u=e(t,i)||{},Zn=!0,O&&(U.nodes_end=k,k===null||k.nodeType!==8||k.data!==`]`))throw me(),pe;o&&Oe()}),()=>{for(var e of c){t.removeEventListener(e,Gn);var i=er.get(e);--i===0?(document.removeEventListener(e,Gn),er.delete(e)):er.set(e,i)}Hn.delete(l),n!==r&&n.parentNode?.removeChild(n)}});return nr.set(u,d),u}var nr=new WeakMap;function rr(e,t,n=!1){O&&_e();var r=e,i=null,a=null,o=D,s=n?y:0,c=!1;let l=(e,t=!0)=>{c=!0,f(t,e)};var u=null;function d(){u!==null&&(u.lastChild.remove(),r.before(u),u=null);var e=o?i:a,t=o?a:i;e&&un(e),t&&sn(t,()=>{o?a=null:i=null})}let f=(e,t)=>{if(o===(o=e))return;let n=!1;if(O){let e=be(r)===`[!`;!!o===e&&(r=ye(),A(r),ge(!1),n=!0)}var s=Pt(),c=r;if(s&&(u=document.createDocumentFragment(),u.append(c=kt())),o?i??=t&&z(()=>t(c)):a??=t&&z(()=>t(c)),s){var l=N,f=o?i:a,p=o?a:i;f&&l.skipped_effects.delete(f),p&&l.skipped_effects.add(p),l.add_callback(d)}else d();n&&ge(!0)};en(()=>{c=!1,t(l),c||f(null,null)},s),O&&(r=k)}let ir=null;function ar(e,t){return t}function or(e,t,n){for(var r=e.items,i=[],a=t.length,o=0;o<a;o++)ln(t[o].e,i,!0);var s=a>0&&i.length===0&&n!==null;if(s){var c=n.parentNode;Nt(c),c.append(n),r.clear(),fr(e,t[0].prev,t[a-1].next)}cn(i,()=>{for(var n=0;n<a;n++){var i=t[n];s||(r.delete(i.k),fr(e,i.prev,i.next)),B(i.e,!s)}})}function sr(t,r,i,a,o,s=null){var c=t,l={flags:r,items:new Map,first:null};if(r&4){var u=t;c=O?A(At(u)):u.appendChild(kt())}O&&_e();var d=null,f=!1,p=new Map,m=dt(()=>{var t=i();return e(t)?t:t==null?[]:n(t)}),h,g;function _(){cr(g,h,l,p,c,o,r,a,i),s!==null&&(h.length===0?d?un(d):d=z(()=>s(c)):d!==null&&sn(d,()=>{d=null}))}en(()=>{g??=U,h=q(m);var e=h.length;if(f&&e===0)return;f=e===0;let t=!1;if(O&&be(c)===`[!`!=(e===0)&&(c=ye(),A(c),ge(!1),t=!0),O){for(var n=null,u,v=0;v<e;v++){if(k.nodeType===8&&k.data===`]`){c=k,t=!0,ge(!1);break}var y=h[v],b=a(y,v);u=ur(k,l,n,null,y,b,v,o,r,i),l.items.set(b,u),n=u}e>0&&A(ye())}if(O)e===0&&s&&(d=z(()=>s(c)));else if(Pt()){var x=new Set,S=N;for(v=0;v<e;v+=1){y=h[v],b=a(y,v);var C=l.items.get(b)??p.get(b);C?r&3&&lr(C,y,v,r):(u=ur(null,l,null,null,y,b,v,o,r,i,!0),p.set(b,u)),x.add(b)}for(let[e,t]of l.items)x.has(e)||S.skipped_effects.add(t.e);S.add_callback(_)}else _();t&&ge(!0),q(m)}),O&&(c=k)}function cr(e,t,r,i,a,o,s,c,l){var u=(s&8)!=0,d=(s&3)!=0,f=t.length,p=r.items,m=r.first,h,g=null,_,v=[],y=[],b,x,S,C;if(u)for(C=0;C<f;C+=1)b=t[C],x=c(b,C),S=p.get(x),S!==void 0&&(S.a?.measure(),(_??=new Set).add(S));for(C=0;C<f;C+=1){if(b=t[C],x=c(b,C),S=p.get(x),S===void 0){var w=i.get(x);if(w!==void 0){i.delete(x),p.set(x,w);var ee=g?g.next:m;fr(r,g,w),fr(r,w,ee),dr(w,ee,a),g=w}else{var te=m?m.e.nodes_start:a;g=ur(te,r,g,g===null?r.first:g.next,b,x,C,o,s,l)}p.set(x,g),v=[],y=[],m=g.next;continue}if(d&&lr(S,b,C,s),S.e.f&8192&&(un(S.e),u&&(S.a?.unfix(),(_??=new Set).delete(S))),S!==m){if(h!==void 0&&h.has(S)){if(v.length<y.length){var T=y[0],E;g=T.prev;var ne=v[0],re=v[v.length-1];for(E=0;E<v.length;E+=1)dr(v[E],T,a);for(E=0;E<y.length;E+=1)h.delete(y[E]);fr(r,ne.prev,re.next),fr(r,g,ne),fr(r,re,T),m=T,g=re,--C,v=[],y=[]}else h.delete(S),dr(S,m,a),fr(r,S.prev,S.next),fr(r,S,g===null?r.first:g.next),fr(r,g,S),g=S;continue}for(v=[],y=[];m!==null&&m.k!==x;)m.e.f&8192||(h??=new Set).add(m),y.push(m),m=m.next;if(m===null)continue;S=m}v.push(S),g=S,m=S.next}if(m!==null||h!==void 0){for(var ie=h===void 0?[]:n(h);m!==null;)m.e.f&8192||ie.push(m),m=m.next;var ae=ie.length;if(ae>0){var oe=s&4&&f===0?a:null;if(u){for(C=0;C<ae;C+=1)ie[C].a?.measure();for(C=0;C<ae;C+=1)ie[C].a?.fix()}or(r,ie,oe)}}u&&Me(()=>{if(_!==void 0)for(S of _)S.a?.apply()}),e.first=r.first&&r.first.e,e.last=g&&g.e;for(var se of i.values())B(se.e);i.clear()}function lr(e,t,n,r){r&1&&yt(e.v,t),r&2?yt(e.i,n):e.i=n}function ur(e,t,n,r,i,a,o,s,c,l,u){var d=ir,f=(c&1)!=0,p=(c&16)==0,m=f?p?vt(i,!1,!1):_t(i):i,h=c&2?_t(o):o,g={i:h,v:m,k:a,a:null,e:null,prev:n,next:r};ir=g;try{return e===null&&document.createDocumentFragment().append(e=kt()),g.e=z(()=>s(e,m,h,l),O),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?u||(t.first=g):(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{ir=d}}function dr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var o=jt(a);i.before(a),a=o}}function fr(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function pr(e,t,n){O&&_e();var r=e,i,a,o=null,s=null;function c(){a&&=(sn(a),null),o&&=(o.lastChild.remove(),r.before(o),null),a=s,s=null}en(()=>{if(i!==(i=t())){var e=Pt();if(i){var l=r;e&&(o=document.createDocumentFragment(),o.append(l=kt()),a&&N.skipped_effects.add(a)),s=z(()=>n(l,i))}e?N.add_callback(c):c()}},y),O&&(r=k)}var mr=[...` 	
\r\f\xA0\v﻿`];function hr(e,t,n){var r=e==null?``:``+e;if(t&&(r=r?r+` `+t:t),n){for(var i in n)if(n[i])r=r?r+` `+i:i;else if(r.length)for(var a=i.length,o=0;(o=r.indexOf(i,o))>=0;){var s=o+a;(o===0||mr.includes(r[o-1]))&&(s===r.length||mr.includes(r[s]))?r=(o===0?``:r.substring(0,o))+r.substring(s+1):o=s}}return r===``?null:r}function gr(e,t=!1){var n=t?` !important;`:`;`,r=``;for(var i in e){var a=e[i];a!=null&&a!==``&&(r+=` `+i+`: `+a+n)}return r}function _r(e){return e[0]!==`-`||e[1]!==`-`?e.toLowerCase():e}function vr(e,t){if(t){var n=``,r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,``).trim();var a=!1,o=0,s=!1,c=[];r&&c.push(...Object.keys(r).map(_r)),i&&c.push(...Object.keys(i).map(_r));var l=0,u=-1;let t=e.length;for(var d=0;d<t;d++){var f=e[d];if(s?f===`/`&&e[d-1]===`*`&&(s=!1):a?a===f&&(a=!1):f===`/`&&e[d+1]===`*`?s=!0:f===`"`||f===`'`?a=f:f===`(`?o++:f===`)`&&o--,!s&&a===!1&&o===0){if(f===`:`&&u===-1)u=d;else if(f===`;`||d===t-1){if(u!==-1){var p=_r(e.substring(l,u).trim());if(!c.includes(p)){f!==`;`&&d++;var m=e.substring(l,d).trim();n+=` `+m+`;`}}l=d+1,u=-1}}}}return r&&(n+=gr(r)),i&&(n+=gr(i,!0)),n=n.trim(),n===``?null:n}return e==null?null:String(e)}function yr(e,t,n,r,i,a){var o=e.__className;if(O||o!==n||o===void 0){var s=hr(n,r,a);(!O||s!==e.getAttribute(`class`))&&(s==null?e.removeAttribute(`class`):t?e.className=s:e.setAttribute(`class`,s)),e.__className=n}else if(a&&i!==a)for(var c in a){var l=!!a[c];(i==null||l!==!!i[c])&&e.classList.toggle(c,l)}return a}function br(e,t={},n,r){for(var i in n){var a=n[i];t[i]!==a&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,r))}}function xr(e,t,n,r){var i=e.__style;if(O||i!==t){var a=vr(t,r);(!O||a!==e.getAttribute(`style`))&&(a==null?e.removeAttribute(`style`):e.style.cssText=a),e.__style=t}else r&&(Array.isArray(r)?(br(e,n?.[0],r[0]),br(e,n?.[1],r[1],`important`)):br(e,n,r));return r}var Sr=Symbol(`is custom element`),Cr=Symbol(`is html`);function wr(e){if(O){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute(`value`)){var n=e.value;Tr(e,`value`,null),e.value=n}if(e.hasAttribute(`checked`)){var r=e.checked;Tr(e,`checked`,null),e.checked=r}}};e.__on_r=n,Me(n),It()}}function Tr(e,t,n,r){var i=Er(e);O&&(i[t]=e.getAttribute(t),t===`src`||t===`srcset`||t===`href`&&e.nodeName===`LINK`)||i[t]!==(i[t]=n)&&(t===`loading`&&(e[te]=n),n==null?e.removeAttribute(t):typeof n!=`string`&&Or(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Er(e){return e.__attributes??={[Sr]:e.nodeName.includes(`-`),[Cr]:e.namespaceURI===`http://www.w3.org/1999/xhtml`}}var Dr=new Map;function Or(e){var t=e.getAttribute(`is`)||e.nodeName,n=Dr.get(t);if(n)return n;Dr.set(t,n=[]);for(var r,i=e,o=Element.prototype;o!==i;){for(var s in r=a(i),r)r[s].set&&n.push(s);i=c(i)}return n}var kr=()=>performance.now();const Ar={tick:e=>requestAnimationFrame(e),now:()=>kr(),tasks:new Set};function jr(){let e=Ar.now();Ar.tasks.forEach(t=>{t.c(e)||(Ar.tasks.delete(t),t.f())}),Ar.tasks.size!==0&&Ar.tick(jr)}function Mr(e){let t;return Ar.tasks.size===0&&Ar.tick(jr),{promise:new Promise(n=>{Ar.tasks.add(t={c:e,f:n})}),abort(){Ar.tasks.delete(t)}}}function Nr(e,t){Lt(()=>{e.dispatchEvent(new CustomEvent(t))})}function Pr(e){if(e===`float`)return`cssFloat`;if(e===`offset`)return`cssOffset`;if(e.startsWith(`--`))return e;let t=e.split(`-`);return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join(``)}function Fr(e){let t={},n=e.split(`;`);for(let e of n){let[n,r]=e.split(`:`);if(!n||r===void 0)break;let i=Pr(n.trim());t[i]=r.trim()}return t}var Ir=e=>e;function Lr(e,t,n,r){var i=(e&1)!=0,a=(e&2)!=0,o=i&&a,s=(e&4)!=0,c=o?`both`:i?`in`:`out`,l,u=t.inert,d=t.style.overflow,f,p;function m(){return Lt(()=>l??=n()(t,r?.()??{},{direction:c}))}var h={is_global:s,in(){if(t.inert=u,!i){p?.abort(),p?.reset?.();return}a||f?.abort(),Nr(t,`introstart`),f=Rr(t,m(),p,1,()=>{Nr(t,`introend`),f?.abort(),f=l=void 0,t.style.overflow=d})},out(e){if(!a){e?.(),l=void 0;return}t.inert=!0,Nr(t,`outrostart`),p=Rr(t,m(),f,0,()=>{Nr(t,`outroend`),e?.()})},stop:()=>{f?.abort(),p?.abort()}},g=U;if((g.transitions??=[]).push(h),i&&Zn){var _=s;if(!_){for(var v=g.parent;v&&v.f&65536;)for(;(v=v.parent)&&!(v.f&16););_=!v||(v.f&32768)!=0}_&&Jt(()=>{Fn(()=>h.in())})}}function Rr(e,t,n,r,i){var a=r===1;if(u(t)){var o,s=!1;return Me(()=>{if(!s){var c=t({direction:a?`in`:`out`});o=Rr(e,c,n,r,i)}}),{abort:()=>{s=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n?.deactivate(),!t?.duration)return i(),{abort:d,deactivate:d,reset:d,t:()=>r};let{delay:c=0,css:l,tick:f,easing:p=Ir}=t;var m=[];if(a&&n===void 0&&(f&&f(0,1),l)){var h=Fr(l(0,1));m.push(h,h)}var g=()=>1-r,_=e.animate(m,{duration:c,fill:`forwards`});return _.onfinish=()=>{_.cancel();var a=n?.t()??1-r;n?.abort();var o=r-a,s=t.duration*Math.abs(o),c=[];if(s>0){var u=!1;if(l)for(var d=Math.ceil(s/(1e3/60)),m=0;m<=d;m+=1){var h=a+o*p(m/d),v=Fr(l(h,1-h));c.push(v),u||=v.overflow===`hidden`}u&&(e.style.overflow=`hidden`),g=()=>{var e=_.currentTime;return a+o*p(e/s)},f&&Mr(()=>{if(_.playState!==`running`)return!1;var e=g();return f(e,1-e),!0})}_=e.animate(c,{duration:s,fill:`forwards`}),_.onfinish=()=>{g=()=>r,f?.(r,1-r),i()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=d)},deactivate:()=>{i=d},reset:()=>{r===0&&f?.(1,0)},t:()=>g()}}function zr(e,t,n=t){var r=new WeakSet;Rt(e,`input`,async i=>{var a=i?e.defaultValue:e.value;if(a=Br(e)?Vr(a):a,n(a),N!==null&&r.add(N),await Nn(),a!==(a=t())){var o=e.selectionStart,s=e.selectionEnd,c=e.value.length;if(e.value=a??``,s!==null){var l=e.value.length;o===s&&s===c&&l>c?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=o,e.selectionEnd=Math.min(s,l))}}}),(O&&e.defaultValue!==e.value||Fn(t)==null&&e.value)&&(n(Br(e)?Vr(e.value):e.value),N!==null&&r.add(N)),Qt(()=>{var n=t();if(e===document.activeElement){var i=ze??N;if(r.has(i))return}Br(e)&&n===Vr(e.value)||e.type===`date`&&!n&&!e.value||n!==e.value&&(e.value=n??``)})}function Br(e){var t=e.type;return t===`number`||t===`range`}function Vr(e){return e===``?null:+e}function Hr(e=!1){let t=M,n=t.l.u;if(!n)return;let r=()=>Ln(t.s);if(e){let e=0,n={},i=ct(()=>{let r=!1,i=t.s;for(let e in i)i[e]!==n[e]&&(n[e]=i[e],r=!0);return r&&e++,e});r=()=>q(i)}n.b.length&&Kt(()=>{Ur(t,r),p(n.b)}),Wt(()=>{let e=Fn(()=>n.m.map(f));return()=>{for(let t of e)typeof t==`function`&&t()}}),n.a.length&&Wt(()=>{Ur(t,r),p(n.a)})}function Ur(e,t){if(e.l.s)for(let t of e.l.s)q(t);t()}function Wr(t,n){var r=t.$$events?.[n.type];for(var i of e(r)?r.slice():r==null?[]:[r])i.call(this,n)}function Gr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),d;let r=Fn(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}var Kr=[];function qr(e,t){return{subscribe:Jr(e,t).subscribe}}function Jr(e,t=d){let n=null,r=new Set;function i(t){if(Se(e,t)&&(e=t,n)){let t=!Kr.length;for(let t of r)t[1](),Kr.push(t,e);if(t){for(let e=0;e<Kr.length;e+=2)Kr[e][0](Kr[e+1]);Kr.length=0}}}function a(t){i(t(e))}function o(o,s=d){let c=[o,s];return r.add(c),r.size===1&&(n=t(i,a)||d),o(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}function Yr(e,t,n){let r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw Error(`derived() expects stores as input, got a falsy value`);let a=t.length<2;return qr(n,(e,n)=>{let o=!1,s=[],c=0,l=d,u=()=>{if(c)return;l();let i=t(r?s[0]:s,e,n);a?e(i):l=typeof i==`function`?i:d},f=i.map((e,t)=>Gr(e,e=>{s[t]=e,c&=~(1<<t),o&&u()},()=>{c|=1<<t}));return o=!0,u(),function(){p(f),l(),o=!1}})}var Xr=!1;function Zr(e){var t=Xr;try{return Xr=!1,[e(),Xr]}finally{Xr=t}}var Qr={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(u(r)&&(r=r()),typeof r==`object`&&r&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let a=e.props[r];u(a)&&(a=a());let o=i(a,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(u(r)&&(r=r()),typeof r==`object`&&r&&t in r){let e=i(r,t);return e&&!e.configurable&&(e.configurable=!0),e}}},has(e,t){if(t===w||t===ee)return!1;for(let n of e.props)if(u(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){let t=[];for(let n of e.props)if(u(n)&&(n=n()),n){for(let e in n)t.includes(e)||t.push(e);for(let e of Object.getOwnPropertySymbols(n))t.includes(e)||t.push(e)}return t}};function $r(...e){return new Proxy({props:e},Qr)}function ei(e,t,n,r){var a=!we||(n&2)!=0,o=(n&8)!=0,s=(n&16)!=0,c=r,l=!0,u=()=>(l&&(l=!1,c=s?Fn(r):r),c),d;if(o){var f=w in e||ee in e;d=i(e,t)?.set??(f&&t in e?n=>e[t]=n:void 0)}var p,m=!1;o?[p,m]=Zr(()=>e[t]):p=e[t],p===void 0&&r!==void 0&&(p=u(),d&&(a&&ce(t),d(p)));var h=a?()=>{var n=e[t];return n===void 0?u():(l=!0,n)}:()=>{var n=e[t];return n!==void 0&&(c=void 0),n===void 0?c:n};if(a&&!(n&4))return h;if(d){var g=e.$$legacy;return(function(e,t){return arguments.length>0?((!a||!t||g||m)&&d(t?h():e),e):h()})}var _=!1,v=(n&1?ct:dt)(()=>(_=!1,h()));o&&q(v);var y=U;return(function(e,t){if(arguments.length>0){let n=t?q(v):a&&o?Ct(e):e;return I(v,n),_=!0,c!==void 0&&(c=n),e}return mn&&_||y.f&16384?v.v:q(v)})}function ti(e){M===null&&E(`onMount`),we&&M.l!==null?oi(M).m.push(e):Wt(()=>{let t=Fn(e);if(typeof t==`function`)return t})}function ni(e){M===null&&E(`onDestroy`),ti(()=>()=>Fn(e))}function ri(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function ii(){let t=M;return t===null&&E(`createEventDispatcher`),(n,r,i)=>{let a=t.s.$$events?.[n];if(a){let o=e(a)?a.slice():[a],s=ri(n,r,i);for(let e of o)e.call(t.x,s);return!s.defaultPrevented}return!0}}function ai(e){M===null&&E(`afterUpdate`),M.l===null&&se(`afterUpdate`),oi(M).a.push(e)}function oi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}typeof window<`u`&&((window.__svelte??={}).v??=new Set).add(`5`),Te();function si(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,a,o=[],s=``,c=e.split(`/`);for(c[0]||c.shift();i=c.shift();)n=i[0],n===`*`?(o.push(`wild`),s+=`/(.*)`):n===`:`?(r=i.indexOf(`?`,1),a=i.indexOf(`.`,1),o.push(i.substring(1,~r?r:~a?a:i.length)),s+=~r&&!~a?`(?:/([^/]+?))?`:`/([^/]+?)`,~a&&(s+=(~r?`?`:``)+`\\`+i.substring(a))):s+=`/`+i;return{keys:o,pattern:RegExp(`^`+s+(t?`(?=$|/)`:`/?$`),`i`)}}function ci(){let e=window.location.href.indexOf(`#/`),t=e>-1?window.location.href.substr(e+1):`/`,n=t.indexOf(`?`),r=``;return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const li=qr(null,function(e){e(ci());let t=()=>{e(ci())};return window.addEventListener(`hashchange`,t,!1),function(){window.removeEventListener(`hashchange`,t,!1)}});Yr(li,e=>e.location),Yr(li,e=>e.querystring);const ui=Jr(void 0);async function di(e){if(!e||e.length<1||e.charAt(0)!=`/`&&e.indexOf(`#/`)!==0)throw Error(`Invalid parameter location`);await Nn();let t=(e.charAt(0)==`#`?``:`#`)+e;try{let e={...history.state};delete e.__svelte_spa_router_scrollX,delete e.__svelte_spa_router_scrollY,window.history.replaceState(e,void 0,t)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event(`hashchange`))}function fi(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function pi(e,t){De(t,!1);let n=ei(t,`routes`,24,()=>({})),r=ei(t,`prefix`,8,``),i=ei(t,`restoreScrollState`,8,!1);class a{constructor(e,t){if(!t||typeof t!=`function`&&(typeof t!=`object`||t._sveltesparouter!==!0))throw Error(`Invalid component object`);if(!e||typeof e==`string`&&(e.length<1||e.charAt(0)!=`/`&&e.charAt(0)!=`*`)||typeof e==`object`&&!(e instanceof RegExp))throw Error(`Invalid value for "path" argument - strings must start with / or *`);let{pattern:n,keys:r}=si(e);this.path=e,typeof t==`object`&&t._sveltesparouter===!0?(this.component=t.component,this.conditions=t.conditions||[],this.userData=t.userData,this.props=t.props||{}):(this.component=()=>Promise.resolve(t),this.conditions=[],this.props={}),this._pattern=n,this._keys=r}match(e){if(r()){if(typeof r()==`string`)if(e.startsWith(r()))e=e.substr(r().length)||`/`;else return null;else if(r()instanceof RegExp){let t=e.match(r());if(t&&t[0])e=e.substr(t[0].length)||`/`;else return null}}let t=this._pattern.exec(e);if(t===null)return null;if(this._keys===!1)return t;let n={},i=0;for(;i<this._keys.length;){try{n[this._keys[i]]=decodeURIComponent(t[i+1]||``)||null}catch{n[this._keys[i]]=null}i++}return n}async checkConditions(e){for(let t=0;t<this.conditions.length;t++)if(!await this.conditions[t](e))return!1;return!0}}let o=[];n()instanceof Map?n().forEach((e,t)=>{o.push(new a(t,e))}):Object.keys(n()).forEach(e=>{o.push(new a(e,n()[e]))});let s=vt(null),c=vt(null),l=vt({}),u=ii();async function d(e,t){await Nn(),u(e,t)}let f=null,p=null;i()&&(p=e=>{f=e.state&&(e.state.__svelte_spa_router_scrollY||e.state.__svelte_spa_router_scrollX)?e.state:null},window.addEventListener(`popstate`,p),ai(()=>{fi(f)}));let m=null,h=null,g=li.subscribe(async e=>{m=e;let t=0;for(;t<o.length;){let n=o[t].match(e.location);if(!n){t++;continue}let r={route:o[t].path,location:e.location,querystring:e.querystring,userData:o[t].userData,params:n&&typeof n==`object`&&Object.keys(n).length?n:null};if(!await o[t].checkConditions(r)){I(s,null),h=null,d(`conditionsFailed`,r);return}d(`routeLoading`,Object.assign({},r));let i=o[t].component;if(h!=i){i.loading?(I(s,i.loading),h=i,I(c,i.loadingParams),I(l,{}),d(`routeLoaded`,Object.assign({},r,{component:q(s),name:q(s).name,params:q(c)}))):(I(s,null),h=null);let t=await i();if(e!=m)return;I(s,t&&t.default||t),h=i}n&&typeof n==`object`&&Object.keys(n).length?I(c,n):I(c,null),I(l,o[t].props),d(`routeLoaded`,Object.assign({},r,{component:q(s),name:q(s).name,params:q(c)})).then(()=>{ui.set(q(c))});return}I(s,null),h=null,ui.set(void 0)});ni(()=>{g(),p&&window.removeEventListener(`popstate`,p)}),Yt(()=>Ln(i()),()=>{history.scrollRestoration=i()?`manual`:`auto`}),Xt(),Hr();var _=Xn(),v=Mt(_),y=e=>{var n=Xn(),r=Mt(n);pr(r,()=>q(s),(e,n)=>{n(e,$r({get params(){return q(c)}},()=>q(l),{$$events:{routeEvent(e){Wr.call(this,t,e)}}}))}),X(e,n)},b=e=>{var n=Xn(),r=Mt(n);pr(r,()=>q(s),(e,n)=>{n(e,$r(()=>q(l),{$$events:{routeEvent(e){Wr.call(this,t,e)}}}))}),X(e,n)};rr(v,e=>{q(c)?e(y):e(b,!1)}),X(e,_),Oe()}var mi=class e extends Error{constructor(t){super(`ClientResponseError`),this.url=``,this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,e.prototype),typeof t==`object`&&t&&(this.url=typeof t.url==`string`?t.url:``,this.status=typeof t.status==`number`?t.status:0,this.isAbort=!!t.isAbort,this.originalError=t.originalError,t.response!==null&&typeof t.response==`object`?this.response=t.response:t.data!==null&&typeof t.data==`object`?this.response=t.data:this.response={}),this.originalError||t instanceof e||(this.originalError=t),typeof DOMException<`u`&&t instanceof DOMException&&(this.isAbort=!0),this.name=`ClientResponseError `+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message=`The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.`:this.originalError?.cause?.message?.includes(`ECONNREFUSED ::1`)?this.message=`Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).`:this.message=`Something went wrong.`),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}},hi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function gi(e,t){let n={};if(typeof e!=`string`)return n;let r=Object.assign({},t||{}).decode||vi,i=0;for(;i<e.length;){let t=e.indexOf(`=`,i);if(t===-1)break;let a=e.indexOf(`;`,i);if(a===-1)a=e.length;else if(a<t){i=e.lastIndexOf(`;`,t-1)+1;continue}let o=e.slice(i,t).trim();if(n[o]===void 0){let i=e.slice(t+1,a).trim();i.charCodeAt(0)===34&&(i=i.slice(1,-1));try{n[o]=r(i)}catch{n[o]=i}}i=a+1}return n}function _i(e,t,n){let r=Object.assign({},n||{}),i=r.encode||yi;if(!hi.test(e))throw TypeError(`argument name is invalid`);let a=i(t);if(a&&!hi.test(a))throw TypeError(`argument val is invalid`);let o=e+`=`+a;if(r.maxAge!=null){let e=r.maxAge-0;if(isNaN(e)||!isFinite(e))throw TypeError(`option maxAge is invalid`);o+=`; Max-Age=`+Math.floor(e)}if(r.domain){if(!hi.test(r.domain))throw TypeError(`option domain is invalid`);o+=`; Domain=`+r.domain}if(r.path){if(!hi.test(r.path))throw TypeError(`option path is invalid`);o+=`; Path=`+r.path}if(r.expires){if(!function(e){return Object.prototype.toString.call(e)===`[object Date]`||e instanceof Date}(r.expires)||isNaN(r.expires.valueOf()))throw TypeError(`option expires is invalid`);o+=`; Expires=`+r.expires.toUTCString()}if(r.httpOnly&&(o+=`; HttpOnly`),r.secure&&(o+=`; Secure`),r.priority)switch(typeof r.priority==`string`?r.priority.toLowerCase():r.priority){case`low`:o+=`; Priority=Low`;break;case`medium`:o+=`; Priority=Medium`;break;case`high`:o+=`; Priority=High`;break;default:throw TypeError(`option priority is invalid`)}if(r.sameSite)switch(typeof r.sameSite==`string`?r.sameSite.toLowerCase():r.sameSite){case!0:o+=`; SameSite=Strict`;break;case`lax`:o+=`; SameSite=Lax`;break;case`strict`:o+=`; SameSite=Strict`;break;case`none`:o+=`; SameSite=None`;break;default:throw TypeError(`option sameSite is invalid`)}return o}function vi(e){return e.indexOf(`%`)===-1?e:decodeURIComponent(e)}function yi(e){return encodeURIComponent(e)}var bi=typeof navigator<`u`&&navigator.product===`ReactNative`||typeof global<`u`&&global.HermesInternal,xi;function Si(e){if(e)try{let t=decodeURIComponent(xi(e.split(`.`)[1]).split(``).map((function(e){return`%`+(`00`+e.charCodeAt(0).toString(16)).slice(-2)})).join(``));return JSON.parse(t)||{}}catch{}return{}}function Ci(e,t=0){let n=Si(e);return!(Object.keys(n).length>0&&(!n.exp||n.exp-t>Date.now()/1e3))}xi=typeof atob!=`function`||bi?e=>{let t=String(e).replace(/=+$/,``);if(t.length%4==1)throw Error(`'atob' failed: The string to be decoded is not correctly encoded.`);for(var n,r,i=0,a=0,o=``;r=t.charAt(a++);~r&&(n=i%4?64*n+r:r,i++%4)&&(o+=String.fromCharCode(255&n>>(-2*i&6))))r=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`.indexOf(r);return o}:atob;var wi=`pb_auth`,Ti=class{constructor(){this.baseToken=``,this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!Ci(this.token)}get isSuperuser(){let e=Si(this.token);return e.type==`auth`&&(this.record?.collectionName==`_superusers`||!this.record?.collectionName&&e.collectionId==`pbc_3142635823`)}get isAdmin(){return console.warn(`Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName`),this.isSuperuser}get isAuthRecord(){return console.warn(`Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName`),Si(this.token).type==`auth`&&!this.isSuperuser}save(e,t){this.baseToken=e||``,this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken=``,this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=wi){let n=gi(e||``)[t]||``,r={};try{r=JSON.parse(n),(typeof r!=`object`||Array.isArray(r))&&(r={})}catch{}this.save(r.token||``,r.record||r.model||null)}exportToCookie(e,t=wi){let n={secure:!0,sameSite:!0,httpOnly:!0,path:`/`},r=Si(this.token);n.expires=r?.exp?new Date(1e3*r.exp):new Date(`1970-01-01`),e=Object.assign({},n,e);let i={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null},a=_i(t,JSON.stringify(i),e),o=typeof Blob<`u`?new Blob([a]).size:a.length;if(i.record&&o>4096){i.record={id:i.record?.id,email:i.record?.email};let n=[`collectionId`,`collectionName`,`verified`];for(let e in this.record)n.includes(e)&&(i.record[e]=this.record[e]);a=_i(t,JSON.stringify(i),e)}return a}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let t=this._onChangeCallbacks.length-1;t>=0;t--)if(this._onChangeCallbacks[t]==e)return delete this._onChangeCallbacks[t],void this._onChangeCallbacks.splice(t,1)}}triggerChange(){for(let e of this._onChangeCallbacks)e&&e(this.token,this.record)}},Ei=class extends Ti{constructor(e=`pocketbase_auth`){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||``}get record(){let e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<`u`&&window?.localStorage){let t=window.localStorage.getItem(e)||``;try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<`u`&&window?.localStorage){let n=t;typeof t!=`string`&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<`u`&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<`u`&&window?.localStorage&&window.addEventListener&&window.addEventListener(`storage`,(e=>{if(e.key!=this.storageKey)return;let t=this._storageGet(this.storageKey)||{};super.save(t.token||``,t.record||t.model||null)}))}},Di=class{constructor(e){this.client=e}},Oi=class extends Di{async getAll(e){return e=Object.assign({method:`GET`},e),this.client.send(`/api/settings`,e)}async update(e,t){return t=Object.assign({method:`PATCH`,body:e},t),this.client.send(`/api/settings`,t)}async testS3(e=`storage`,t){return t=Object.assign({method:`POST`,body:{filesystem:e}},t),this.client.send(`/api/settings/test/s3`,t).then((()=>!0))}async testEmail(e,t,n,r){return r=Object.assign({method:`POST`,body:{email:t,template:n,collection:e}},r),this.client.send(`/api/settings/test/email`,r).then((()=>!0))}async generateAppleClientSecret(e,t,n,r,i,a){return a=Object.assign({method:`POST`,body:{clientId:e,teamId:t,keyId:n,privateKey:r,duration:i}},a),this.client.send(`/api/settings/apple/generate-client-secret`,a)}},ki=[`requestKey`,`$cancelKey`,`$autoCancel`,`fetch`,`headers`,`body`,`query`,`params`,`cache`,`credentials`,`headers`,`integrity`,`keepalive`,`method`,`mode`,`redirect`,`referrer`,`referrerPolicy`,`signal`,`window`];function Ai(e){if(e)for(let t in e.query=e.query||{},e)ki.includes(t)||(e.query[t]=e[t],delete e[t])}function ji(e){let t=[];for(let n in e){let r=encodeURIComponent(n),i=Array.isArray(e[n])?e[n]:[e[n]];for(let e of i)e=Mi(e),e!==null&&t.push(r+`=`+e)}return t.join(`&`)}function Mi(e){return e==null?null:e instanceof Date?encodeURIComponent(e.toISOString().replace(`T`,` `)):typeof e==`object`?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)}var Ni=class extends Di{constructor(){super(...arguments),this.clientId=``,this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,n){if(!e)throw Error(`topic must be set.`);let r=e;if(n){Ai(n=Object.assign({},n));let e=`options=`+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));r+=(r.includes(`?`)?`&`:`?`)+e}let i=function(e){let n=e,r;try{r=JSON.parse(n?.data)}catch{}t(r||{})};return this.subscriptions[r]||(this.subscriptions[r]=[]),this.subscriptions[r].push(i),this.isConnected?this.subscriptions[r].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(r,i):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,i)}async unsubscribe(e){let t=!1;if(e){let n=this.getSubscriptionsByTopic(e);for(let e in n)if(this.hasSubscriptionListeners(e)){for(let t of this.subscriptions[e])this.eventSource?.removeEventListener(e,t);delete this.subscriptions[e],t||=!0}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let n in this.subscriptions)if((n+`?`).startsWith(e)){t=!0;for(let e of this.subscriptions[n])this.eventSource?.removeEventListener(n,e);delete this.subscriptions[n]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let n=!1,r=this.getSubscriptionsByTopic(e);for(let e in r){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)continue;let r=!1;for(let n=this.subscriptions[e].length-1;n>=0;n--)this.subscriptions[e][n]===t&&(r=!0,delete this.subscriptions[e][n],this.subscriptions[e].splice(n,1),this.eventSource?.removeEventListener(e,t));r&&(this.subscriptions[e].length||delete this.subscriptions[e],n||this.hasSubscriptionListeners(e)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send(`/api/realtime`,{method:`POST`,body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return`realtime_`+this.clientId}getSubscriptionsByTopic(e){let t={};for(let n in e=e.includes(`?`)?e:e+`?`,this.subscriptions)(n+`?`).startsWith(e)&&(t[n]=this.subscriptions[n]);return t}getNonEmptySubscriptionKeys(){let e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource)for(let e in this.removeAllSubscriptionListeners(),this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(Error(`EventSource connect took too long.`))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL(`/api/realtime`)),this.eventSource.onerror=e=>{this.connectErrorHandler(Error(`Failed to establish realtime connection.`))},this.eventSource.addEventListener(`PB_CONNECT`,(e=>{this.clientId=e?.lastEventId,this.submitSubscriptions().then((async()=>{let e=3;for(;this.hasUnsentSubscriptions()&&e>0;)e--,await this.submitSubscriptions()})).then((()=>{for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);let t=this.getSubscriptionsByTopic(`PB_CONNECT`);for(let n in t)for(let r of t[n])r(e)})).catch((e=>{this.clientId=``,this.connectErrorHandler(e)}))}))}hasUnsentSubscriptions(){let e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(let t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let t of this.pendingConnects)t.reject(new mi(e));this.pendingConnects=[],this.disconnect();return}this.disconnect(!0);let t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId=``,!e){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}},Pi=class extends Di{decode(e){return e}async getFullList(e,t){if(typeof e==`number`)return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}async getList(e=1,t=30,n){return(n=Object.assign({method:`GET`},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then((e=>(e.items=e.items?.map((e=>this.decode(e)))||[],e)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:`one_by_filter_`+this.baseCrudPath+`_`+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((e=>{if(!e?.items?.length)throw new mi({status:404,response:{code:404,message:`The requested resource wasn't found.`,data:{}}});return e.items[0]}))}async getOne(e,t){if(!e)throw new mi({url:this.client.buildURL(this.baseCrudPath+`/`),status:404,response:{code:404,message:`Missing required record id.`,data:{}}});return t=Object.assign({method:`GET`},t),this.client.send(this.baseCrudPath+`/`+encodeURIComponent(e),t).then((e=>this.decode(e)))}async create(e,t){return t=Object.assign({method:`POST`,body:e},t),this.client.send(this.baseCrudPath,t).then((e=>this.decode(e)))}async update(e,t,n){return n=Object.assign({method:`PATCH`,body:t},n),this.client.send(this.baseCrudPath+`/`+encodeURIComponent(e),n).then((e=>this.decode(e)))}async delete(e,t){return t=Object.assign({method:`DELETE`},t),this.client.send(this.baseCrudPath+`/`+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t||={}).query=Object.assign({skipTotal:1},t.query);let n=[],r=async i=>this.getList(i,e||500,t).then((e=>{let t=e.items;return n=n.concat(t),t.length==e.perPage?r(i+1):n}));return r(1)}};function Fi(e,t,n,r){let i=r!==void 0;return i||n!==void 0?i?(console.warn(e),t.body=Object.assign({},t.body,n),t.query=Object.assign({},t.query,r),t):Object.assign(t,n):t}function Ii(e){e._resetAutoRefresh?.()}var Li=class extends Pi{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+`/records`}get baseCollectionPath(){return`/api/collections/`+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName==`_superusers`||this.collectionIdOrName==`_pbc_2773867675`}async subscribe(e,t,n){if(!e)throw Error(`Missing topic.`);if(!t)throw Error(`Missing subscription callback.`);return this.client.realtime.subscribe(this.collectionIdOrName+`/`+e,t,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+`/`+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e==`number`)return super.getFullList(e,t);let n=Object.assign({},e,t);return super.getFullList(n)}async getList(e=1,t=30,n){return super.getList(e,t,n)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,n){return super.update(e,t,n).then((e=>{if(this.client.authStore.record?.id===e?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let t=Object.assign({},this.client.authStore.record.expand),n=Object.assign({},this.client.authStore.record,e);t&&(n.expand=Object.assign(t,e.expand)),this.client.authStore.save(this.client.authStore.token,n)}return e}))}async delete(e,t){return super.delete(e,t).then((t=>(!t||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),t)))}authResponse(e){let t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||``,record:t})}async listAuthMethods(e){return e=Object.assign({method:`GET`,fields:`mfa,otp,password,oauth2`},e),this.client.send(this.baseCollectionPath+`/auth-methods`,e)}async authWithPassword(e,t,n){let r;n=Object.assign({method:`POST`,body:{identity:e,password:t}},n),this.isSuperusers&&(r=n.autoRefreshThreshold,delete n.autoRefreshThreshold,n.autoRefresh||Ii(this.client));let i=await this.client.send(this.baseCollectionPath+`/auth-with-password`,n);return i=this.authResponse(i),r&&this.isSuperusers&&function(e,t,n,r){Ii(e);let i=e.beforeSend,a=e.authStore.record,o=e.authStore.onChange(((t,n)=>{(!t||n?.id!=a?.id||(n?.collectionId||a?.collectionId)&&n?.collectionId!=a?.collectionId)&&Ii(e)}));e._resetAutoRefresh=function(){o(),e.beforeSend=i,delete e._resetAutoRefresh},e.beforeSend=async(a,o)=>{let s=e.authStore.token;if(o.query?.autoRefresh)return i?i(a,o):{url:a,sendOptions:o};let c=e.authStore.isValid;if(c&&Ci(e.authStore.token,t))try{await n()}catch{c=!1}c||await r();let l=o.headers||{};for(let t in l)if(t.toLowerCase()==`authorization`&&s==l[t]&&e.authStore.token){l[t]=e.authStore.token;break}return o.headers=l,i?i(a,o):{url:a,sendOptions:o}}}(this.client,r,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},n)))),i}async authWithOAuth2Code(e,t,n,r,i,a,o){let s={method:`POST`,body:{provider:e,code:t,codeVerifier:n,redirectURL:r,createData:i}};return s=Fi(`This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).`,s,a,o),this.client.send(this.baseCollectionPath+`/auth-with-oauth2`,s).then((e=>this.authResponse(e)))}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]==`string`)return console.warn(`PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration.`),this.authWithOAuth2Code(e?.[0]||``,e?.[1]||``,e?.[2]||``,e?.[3]||``,e?.[4]||{},e?.[5]||{},e?.[6]||{});let t=e?.[0]||{},n=null;t.urlCallback||(n=Ri(void 0));let r=new Ni(this.client);function i(){n?.close(),r.unsubscribe()}let a={},o=t.requestKey;return o&&(a.requestKey=o),this.listAuthMethods(a).then((e=>{let a=e.oauth2.providers.find((e=>e.name===t.provider));if(!a)throw new mi(Error(`Missing or invalid provider "${t.provider}".`));let s=this.client.buildURL(`/api/oauth2-redirect`),c=o?this.client.cancelControllers?.[o]:void 0;return c&&(c.signal.onabort=()=>{i()}),new Promise((async(e,o)=>{try{await r.subscribe(`@oauth2`,(async n=>{let l=r.clientId;try{if(!n.state||l!==n.state)throw Error(`State parameters don't match.`);if(n.error||!n.code)throw Error(`OAuth2 redirect error or missing code: `+n.error);let r=Object.assign({},t);delete r.provider,delete r.scopes,delete r.createData,delete r.urlCallback,c?.signal?.onabort&&(c.signal.onabort=null);let i=await this.authWithOAuth2Code(a.name,n.code,a.codeVerifier,s,t.createData,r);e(i)}catch(e){o(new mi(e))}i()}));let l={state:r.clientId};t.scopes?.length&&(l.scope=t.scopes.join(` `));let u=this._replaceQueryParams(a.authURL+s,l);await(t.urlCallback||function(e){n?n.location.href=e:n=Ri(e)})(u)}catch(e){i(),o(new mi(e))}}))})).catch((e=>{throw i(),e}))}async authRefresh(e,t){let n={method:`POST`};return n=Fi(`This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).`,n,e,t),this.client.send(this.baseCollectionPath+`/auth-refresh`,n).then((e=>this.authResponse(e)))}async requestPasswordReset(e,t,n){let r={method:`POST`,body:{email:e}};return r=Fi(`This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).`,r,t,n),this.client.send(this.baseCollectionPath+`/request-password-reset`,r).then((()=>!0))}async confirmPasswordReset(e,t,n,r,i){let a={method:`POST`,body:{token:e,password:t,passwordConfirm:n}};return a=Fi(`This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).`,a,r,i),this.client.send(this.baseCollectionPath+`/confirm-password-reset`,a).then((()=>!0))}async requestVerification(e,t,n){let r={method:`POST`,body:{email:e}};return r=Fi(`This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).`,r,t,n),this.client.send(this.baseCollectionPath+`/request-verification`,r).then((()=>!0))}async confirmVerification(e,t,n){let r={method:`POST`,body:{token:e}};return r=Fi(`This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).`,r,t,n),this.client.send(this.baseCollectionPath+`/confirm-verification`,r).then((()=>{let t=Si(e),n=this.client.authStore.record;return n&&!n.verified&&n.id===t.id&&n.collectionId===t.collectionId&&(n.verified=!0,this.client.authStore.save(this.client.authStore.token,n)),!0}))}async requestEmailChange(e,t,n){let r={method:`POST`,body:{newEmail:e}};return r=Fi(`This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).`,r,t,n),this.client.send(this.baseCollectionPath+`/request-email-change`,r).then((()=>!0))}async confirmEmailChange(e,t,n,r){let i={method:`POST`,body:{token:e,password:t}};return i=Fi(`This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).`,i,n,r),this.client.send(this.baseCollectionPath+`/confirm-email-change`,i).then((()=>{let t=Si(e),n=this.client.authStore.record;return n&&n.id===t.id&&n.collectionId===t.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection(`_externalAuths`).getFullList(Object.assign({},t,{filter:this.client.filter(`recordRef = {:id}`,{id:e})}))}async unlinkExternalAuth(e,t,n){let r=await this.client.collection(`_externalAuths`).getFirstListItem(this.client.filter(`recordRef = {:recordId} && provider = {:provider}`,{recordId:e,provider:t}));return this.client.collection(`_externalAuths`).delete(r.id,n).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:`POST`,body:{email:e}},t),this.client.send(this.baseCollectionPath+`/request-otp`,t)}async authWithOTP(e,t,n){return n=Object.assign({method:`POST`,body:{otpId:e,password:t}},n),this.client.send(this.baseCollectionPath+`/auth-with-otp`,n).then((e=>this.authResponse(e)))}async impersonate(e,t,n){(n=Object.assign({method:`POST`,body:{duration:t}},n)).headers=n.headers||{},n.headers.Authorization||(n.headers.Authorization=this.client.authStore.token);let r=new Qi(this.client.baseURL,new Ti,this.client.lang),i=await r.send(this.baseCollectionPath+`/impersonate/`+encodeURIComponent(e),n);return r.authStore.save(i?.token,this.decode(i?.record||{})),r}_replaceQueryParams(e,t={}){let n=e,r=``;e.indexOf(`?`)>=0&&(n=e.substring(0,e.indexOf(`?`)),r=e.substring(e.indexOf(`?`)+1));let i={},a=r.split(`&`);for(let e of a){if(e==``)continue;let t=e.split(`=`);i[decodeURIComponent(t[0].replace(/\+/g,` `))]=decodeURIComponent((t[1]||``).replace(/\+/g,` `))}for(let e in t)t.hasOwnProperty(e)&&(t[e]==null?delete i[e]:i[e]=t[e]);for(let e in r=``,i)i.hasOwnProperty(e)&&(r!=``&&(r+=`&`),r+=encodeURIComponent(e.replace(/%20/g,`+`))+`=`+encodeURIComponent(i[e].replace(/%20/g,`+`)));return r==``?n:n+`?`+r}};function Ri(e){if(typeof window>`u`||!window?.open)throw new mi(Error(`Not in a browser context - please pass a custom urlCallback function.`));let t=1024,n=768,r=window.innerWidth,i=window.innerHeight;t=t>r?r:t,n=n>i?i:n;let a=r/2-t/2,o=i/2-n/2;return window.open(e,`popup_window`,`width=`+t+`,height=`+n+`,top=`+o+`,left=`+a+`,resizable,menubar=no`)}var zi=class extends Pi{get baseCrudPath(){return`/api/collections`}async import(e,t=!1,n){return n=Object.assign({method:`PUT`,body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+`/import`,n).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:`GET`},e),this.client.send(this.baseCrudPath+`/meta/scaffolds`,e)}async truncate(e,t){return t=Object.assign({method:`DELETE`},t),this.client.send(this.baseCrudPath+`/`+encodeURIComponent(e)+`/truncate`,t).then((()=>!0))}},Bi=class extends Di{async getList(e=1,t=30,n){return(n=Object.assign({method:`GET`},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(`/api/logs`,n)}async getOne(e,t){if(!e)throw new mi({url:this.client.buildURL(`/api/logs/`),status:404,response:{code:404,message:`Missing required log id.`,data:{}}});return t=Object.assign({method:`GET`},t),this.client.send(`/api/logs/`+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:`GET`},e),this.client.send(`/api/logs/stats`,e)}},Vi=class extends Di{async check(e){return e=Object.assign({method:`GET`},e),this.client.send(`/api/health`,e)}},Hi=class extends Di{getUrl(e,t,n={}){return console.warn(`Please replace pb.files.getUrl() with pb.files.getURL()`),this.getURL(e,t,n)}getURL(e,t,n={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return``;let r=[];r.push(`api`),r.push(`files`),r.push(encodeURIComponent(e.collectionId||e.collectionName)),r.push(encodeURIComponent(e.id)),r.push(encodeURIComponent(t));let i=this.client.buildURL(r.join(`/`));if(Object.keys(n).length){!1===n.download&&delete n.download;let e=new URLSearchParams(n);i+=(i.includes(`?`)?`&`:`?`)+e}return i}async getToken(e){return e=Object.assign({method:`POST`},e),this.client.send(`/api/files/token`,e).then((e=>e?.token||``))}},Ui=class extends Di{async getFullList(e){return e=Object.assign({method:`GET`},e),this.client.send(`/api/backups`,e)}async create(e,t){return t=Object.assign({method:`POST`,body:{name:e}},t),this.client.send(`/api/backups`,t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:`POST`,body:e},t),this.client.send(`/api/backups/upload`,t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:`DELETE`},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:`POST`},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn(`Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()`),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}},Wi=class extends Di{async getFullList(e){return e=Object.assign({method:`GET`},e),this.client.send(`/api/crons`,e)}async run(e,t){return t=Object.assign({method:`POST`},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}};function Gi(e){return typeof Blob<`u`&&e instanceof Blob||typeof File<`u`&&e instanceof File||typeof e==`object`&&!!e&&e.uri&&(typeof navigator<`u`&&navigator.product===`ReactNative`||typeof global<`u`&&global.HermesInternal)}function Ki(e){return e&&(e.constructor?.name===`FormData`||typeof FormData<`u`&&e instanceof FormData)}function qi(e){for(let t in e){let n=Array.isArray(e[t])?e[t]:[e[t]];for(let e of n)if(Gi(e))return!0}return!1}var Ji=/^[\-\.\d]+$/;function Yi(e){if(typeof e!=`string`)return e;if(e==`true`)return!0;if(e==`false`)return!1;if((e[0]===`-`||e[0]>=`0`&&e[0]<=`9`)&&Ji.test(e)){let t=+e;if(``+t===e)return t}return e}var Xi=class extends Di{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new Zi(this.requests,e)),this.subs[e]}async send(e){let t=new FormData,n=[];for(let e=0;e<this.requests.length;e++){let r=this.requests[e];if(n.push({method:r.method,url:r.url,headers:r.headers,body:r.json}),r.files)for(let n in r.files){let i=r.files[n]||[];for(let r of i)t.append(`requests.`+e+`.`+n,r)}}return t.append(`@jsonPayload`,JSON.stringify({requests:n})),e=Object.assign({method:`POST`,body:t},e),this.client.send(`/api/batch`,e)}},Zi=class{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);let n={method:`PUT`,url:`/api/collections/`+encodeURIComponent(this.collectionIdOrName)+`/records`};this.prepareRequest(n,t),this.requests.push(n)}create(e,t){t=Object.assign({body:e||{}},t);let n={method:`POST`,url:`/api/collections/`+encodeURIComponent(this.collectionIdOrName)+`/records`};this.prepareRequest(n,t),this.requests.push(n)}update(e,t,n){n=Object.assign({body:t||{}},n);let r={method:`PATCH`,url:`/api/collections/`+encodeURIComponent(this.collectionIdOrName)+`/records/`+encodeURIComponent(e)};this.prepareRequest(r,n),this.requests.push(r)}delete(e,t){t=Object.assign({},t);let n={method:`DELETE`,url:`/api/collections/`+encodeURIComponent(this.collectionIdOrName)+`/records/`+encodeURIComponent(e)};this.prepareRequest(n,t),this.requests.push(n)}prepareRequest(e,t){if(Ai(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){let n=ji(t.query);n&&(e.url+=(e.url.includes(`?`)?`&`:`?`)+n)}let n=t.body;for(let t in Ki(n)&&(n=function(e){let t={};return e.forEach(((e,n)=>{if(n===`@jsonPayload`&&typeof e==`string`)try{let n=JSON.parse(e);Object.assign(t,n)}catch(e){console.warn(`@jsonPayload error:`,e)}else t[n]===void 0?t[n]=Yi(e):(Array.isArray(t[n])||(t[n]=[t[n]]),t[n].push(Yi(e)))})),t}(n)),n){let r=n[t];if(Gi(r))e.files[t]=e.files[t]||[],e.files[t].push(r);else if(Array.isArray(r)){let n=[],i=[];for(let e of r)Gi(e)?n.push(e):i.push(e);if(n.length>0&&n.length==r.length){e.files[t]=e.files[t]||[];for(let r of n)e.files[t].push(r)}else if(e.json[t]=i,n.length>0){let r=t;t.startsWith(`+`)||t.endsWith(`+`)||(r+=`+`),e.files[r]=e.files[r]||[];for(let t of n)e.files[r].push(t)}}else e.json[t]=r}}},Qi=class{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e=`/`,t,n=`en-US`){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=n,t?this.authStore=t:typeof window<`u`&&window.Deno?this.authStore=new Ti:this.authStore=new Ei,this.collections=new zi(this),this.files=new Hi(this),this.logs=new Bi(this),this.settings=new Oi(this),this.realtime=new Ni(this),this.health=new Vi(this),this.backups=new Ui(this),this.crons=new Wi(this)}get admins(){return this.collection(`_superusers`)}createBatch(){return new Xi(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Li(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let r=t[n];switch(typeof r){case`boolean`:case`number`:r=``+r;break;case`string`:r=`'`+r.replace(/'/g,`\\'`)+`'`;break;default:r=r===null?`null`:r instanceof Date?`'`+r.toISOString().replace(`T`,` `)+`'`:`'`+JSON.stringify(r).replace(/'/g,`\\'`)+`'`}e=e.replaceAll(`{:`+n+`}`,r)}return e}getFileUrl(e,t,n={}){return console.warn(`Please replace pb.getFileUrl() with pb.files.getURL()`),this.files.getURL(e,t,n)}buildUrl(e){return console.warn(`Please replace pb.buildUrl() with pb.buildURL()`),this.buildURL(e)}buildURL(e){let t=this.baseURL;return typeof window>`u`||!window.location||t.startsWith(`https://`)||t.startsWith(`http://`)||(t=window.location.origin?.endsWith(`/`)?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||``,this.baseURL.startsWith(`/`)||(t+=window.location.pathname||`/`,t+=t.endsWith(`/`)?``:`/`),t+=this.baseURL),e&&(t+=t.endsWith(`/`)?``:`/`,t+=e.startsWith(`/`)?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildURL(e);if(this.beforeSend){let e=Object.assign({},await this.beforeSend(n,t));e.url!==void 0||e.options!==void 0?(n=e.url||n,t=e.options||t):Object.keys(e).length&&(t=e,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){let e=ji(t.query);e&&(n+=(n.includes(`?`)?`&`:`?`)+e),delete t.query}return this.getHeader(t.headers,`Content-Type`)==`application/json`&&t.body&&typeof t.body!=`string`&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then((async e=>{let n={};try{n=await e.json()}catch{}if(this.afterSend&&(n=await this.afterSend(e,n,t)),e.status>=400)throw new mi({url:e.url,status:e.status,data:n});return n})).catch((e=>{throw new mi(e)}))}initSendOptions(e,t){if((t=Object.assign({method:`GET`},t)).body=function(e){if(typeof FormData>`u`||e===void 0||typeof e!=`object`||!e||Ki(e)||!qi(e))return e;let t=new FormData;for(let n in e){let r=e[n];if(r!==void 0)if(typeof r!=`object`||qi({data:r})){let e=Array.isArray(r)?r:[r];for(let r of e)t.append(n,r)}else{let e={};e[n]=r,t.append(`@jsonPayload`,JSON.stringify(e))}}return t}(t.body),Ai(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(!1===t.$autoCancel||!1===t.query.$autoCancel?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,`Content-Type`)!==null||Ki(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":`application/json`})),this.getHeader(t.headers,`Accept-Language`)===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,`Authorization`)===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){let n=t.requestKey||(t.method||`GET`)+e;delete t.requestKey,this.cancelRequest(n);let r=new AbortController;this.cancelControllers[n]=r,t.signal=r.signal}return t}getHeader(e,t){for(let n in e||={},t=t.toLowerCase(),e)if(n.toLowerCase()==t)return e[n];return null}};const $i=new Qi(`https://georgeeggers.xyz`);let Z=Ct({name:`Mocha`,type:`dark`,textColor:`#cdd6f4`,mainColor:`#c46f7cff`,lightMainColor:`#e694a0ff`,dimMainColor:`#8a525aff`,grayColor:`#313244`,inputColor:`#272935d0`,bgColor:`#1e1e2e`,lightBgColor:`#242436ff`,lighterBgColor:`#2e2e46ff`,fail:`#df6174ff`}),Q=Ct({url:``,beat:null,playing:!1,out:!1,triggerUpdate:!1});var ea=Y(`<h1 class="svelte-18a4cz">Upload Beat</h1>`),ta=Y(`<h1 class="svelte-18a4cz"> </h1>`),na=(e,t)=>t(e,`beat`),ra=Y(`<h1 class="svelte-18a4cz">Upload Cover</h1>`),ia=Y(`<h1 class="svelte-18a4cz"> </h1>`),aa=(e,t)=>t(e,`cover`),oa=(e,t)=>t(1),sa=(e,t,n,r)=>{I(t,q(n),!0),I(r,-1)},ca=Y(`<label class="item svelte-18a4cz"> </label> <button class="invis">Select Key</button>`,1),la=(e,t)=>t(2),ua=(e,t,n,r)=>{I(t,n,!0),I(r,-1)},da=Y(`<label class="item svelte-18a4cz"> </label> <button class="invis">Select Key</button>`,1),fa=Y(`<div class="container svelte-18a4cz"><div class="titleRow svelte-18a4cz"><h1 class="svelte-18a4cz">Upload Beat!</h1></div> <h2>For dev use only. If you're here, go away</h2> <label for="uploadBeat" class="uploadTrigger svelte-18a4cz"><!></label> <input type="file" multiple id="uploadBeat" class="invis svelte-18a4cz"/> <label for="uploadCover" class="uploadTrigger svelte-18a4cz"><!></label> <input type="file" multiple id="uploadCover" class="invis svelte-18a4cz"/> <input type="text" placeholder="Beat Name" class="svelte-18a4cz"/> <input type="text" placeholder="BPM" class="svelte-18a4cz"/> <button class="invis" id="focus1">Focus 1</button> <label for="focus1"><p> </p> <div class="content svelte-18a4cz"></div></label> <button class="invis" id="focus2">Focus 2</button> <label for="focus2"><p> </p> <div class="content svelte-18a4cz"></div></label> <input type="text" placeholder="Upload Code" class="svelte-18a4cz"/> <button class="thing svelte-18a4cz">Go!</button></div>`);function pa(e,t){De(t,!0);let n=F(null),r=F(null),i=F(``),a=F(``),o=F(``),s=F(``),c=F(``),l=[`C`,`C#`,`D`,`D#`,`E`,`F`,`F#`,`G`,`G#`,`A`,`A#`,`B`,`B#`],u=async e=>{I(n,e,!0)},d=async e=>{I(r,e,!0)},f=F(-1),p=e=>{e==q(f)?I(f,-1):I(f,e,!0)};async function m(){if(q(n)==null||q(r)==null||q(i)==``||q(a)==``||q(o)==``||q(c)==``){alert(`AHHHHHHHH BAD BAD BAD BAD`);return}let e=!1;q(s)==`Major`&&(e=!0),await $i.collection(`_superusers`).authWithPassword(`georgeeggers682@gmail.com`,q(c));let t={Name:q(i),bpm:q(a),beat:q(n),thumbnail:q(r),key:q(o),isMajor:e};await $i.collection(`beats`).create(t)&&alert(`beat Uploaded`),di(`/`)}async function h(e,t){if(e.type==`change`)for(let n of e.target.files)t==`beat`?await u(n):await d(n);else if(e.type==`drop`)for(let n of e.dataTransfer.files)t==`beat`?await u(n):await d(n)}var g=fa(),_=R(L(g),4),v=L(_),y=e=>{var t=ea();X(e,t)},b=e=>{var t=ta(),r=L(t,!0);j(t),$t(e=>Qn(r,e),[()=>q(n).name.slice(0,16)]),X(e,t)};rr(v,e=>{q(n)==null?e(y):e(b,!1)}),j(_);var x=R(_,2);x.__change=[na,h];var S=R(x,2),C=L(S),w=e=>{var t=ra();X(e,t)},ee=e=>{var t=ia(),n=L(t,!0);j(t),$t(e=>Qn(n,e),[()=>q(r).name.slice(0,16)]),X(e,t)};rr(C,e=>{q(r)==null?e(w):e(ee,!1)}),j(S);var te=R(S,2);te.__change=[aa,h];var T=R(te,2);wr(T);var E=R(T,2);wr(E);var ne=R(E,2);ne.__click=[oa,p];var re=R(ne,2),ie=L(re),ae=L(ie,!0);j(ie);var oe=R(ie,2);sr(oe,21,()=>l,ar,(e,t,n)=>{var r=ca(),i=Mt(r);Tr(i,`for`,`b${n}`);var a=L(i,!0);j(i);var s=R(i,2);Tr(s,`id`,`b${n}`),s.__click=[sa,o,t,f],$t(()=>Qn(a,q(t))),X(e,r)}),j(oe),j(re);var se=R(re,2);se.__click=[la,p];var ce=R(se,2),le=L(ce),ue=L(le,!0);j(le);var de=R(le,2);sr(de,20,()=>[`Major`,`Minor`],ar,(e,t,n)=>{var r=da(),i=Mt(r);Tr(i,`for`,`d${n}`);var a=L(i,!0);j(i);var o=R(i,2);Tr(o,`id`,`d${n}`),o.__click=[ua,s,t,f],$t(()=>Qn(a,t)),X(e,r)}),j(de),j(ce);var fe=R(ce,2);wr(fe);var pe=R(fe,2);pe.__click=m,j(g),$t(()=>{yr(re,1,`dropDown ${q(f)==1?`focused`:``}`,`svelte-18a4cz`),Qn(ae,q(o)==``?`Key`:q(o)),yr(ce,1,`dropDown ${q(f)==2?`focused`:``}`,`svelte-18a4cz`),Qn(ue,q(s)==``?`Scale`:q(s))}),zr(T,()=>q(i),e=>I(i,e)),zr(E,()=>q(a),e=>I(a,e)),zr(fe,()=>q(c),e=>I(c,e)),X(e,g),Oe()}Un([`change`,`click`]);var ma=(e,t,n)=>t(q(n)),ha=Y(`<label class="beat svelte-by53ug"><img alt="Thumbnail" class="svelte-by53ug"/> <h2 class="svelte-by53ug"> </h2></label> <button class="invis svelte-by53ug">Play Beat</button>`,1),ga=Y(`<div class="col svelte-by53ug"></div>`),_a=Y(`<button class="svelte-by53ug">Load More!</button>`),va=Y(`<div class="mainContainer svelte-by53ug"><h1>@royalmadethat</h1> <div class="beatContainer svelte-by53ug" id="main"></div> <!></div>`);function ya(e,t){De(t,!0);let n=Ct([]),r=e=>$i.files.getURL(e,e.beat),i=e=>$i.files.getURL(e,e.thumbnail,{thumb:`256x256`}),a=F(1),o=async()=>{let e=await $i.collection(`beats`).getList(q(a),12,{sort:`-created`});for(let t of e.items)n.push(t);l(),bt(a)};ti(async()=>{await o(),window.addEventListener(`resize`,l)}),ni(async()=>{window.removeEventListener(`resize`,l)});let s=e=>{Q.url=r(e),Q.beat=e,Q.triggerUpdate=!0},c=F(Ct([])),l=()=>{let e=document.getElementById(`main`).offsetWidth,t=Math.floor(e/280);if(t<1?t=1:t>4&&(t=4),t!=-1){I(c,[],!0);for(let e=0;e<t;e++)q(c).push([]);let e=0;for(let r of n)q(c)[e%t].push(r),e++}};var u=va(),d=R(L(u),2);sr(d,21,()=>q(c),ar,(e,t,n)=>{var r=ga();sr(r,21,()=>q(t),ar,(e,t,r)=>{var a=ha(),o=Mt(a);Tr(o,`for`,`play${n}-${r}`);var c=L(o),l=R(c,2),u=L(l,!0);j(l),j(o);var d=R(o,2);Tr(d,`id`,`play${n}-${r}`),d.__click=[ma,s,t],$t(e=>{Tr(c,`src`,e),Qn(u,q(t).Name)},[()=>i(q(t))]),X(e,a)}),j(r),X(e,r)}),j(d);var f=R(d,2),p=e=>{var t=_a();t.__click=o,X(e,t)};rr(f,e=>{n.length%12==0&&e(p)}),j(u),X(e,u),Oe()}Un([`click`]);const ba={"/":ya,"/d":pa};function $(e,t,n,r){return new(n||=Promise)((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))}var xa=class{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){let n=(...r)=>{this.un(e,n),t(...r)};return this.listeners[e].add(n),()=>this.un(e,n)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])==null||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((e=>e(...t)))}},Sa={decode:function(e,t){return $(this,void 0,void 0,(function*(){let n=new AudioContext({sampleRate:t});try{return yield n.decodeAudioData(e)}finally{n.close()}}))},createBuffer:function(e,t){if(!e||e.length===0)throw Error(`channelData must be a non-empty array`);if(t<=0)throw Error(`duration must be greater than 0`);if(typeof e[0]==`number`&&(e=[e]),!e[0]||e[0].length===0)throw Error(`channelData must contain non-empty channel arrays`);return function(e){let t=e[0];if(t.some((e=>e>1||e<-1))){let n=t.length,r=0;for(let e=0;e<n;e++){let n=Math.abs(t[e]);n>r&&(r=n)}for(let t of e)for(let e=0;e<n;e++)t[e]/=r}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:t=>e?.[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Ca(e,t){let n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(let[e,r]of Object.entries(t))if(e===`children`&&r)for(let[e,t]of Object.entries(r))t instanceof Node?n.appendChild(t):typeof t==`string`?n.appendChild(document.createTextNode(t)):n.appendChild(Ca(e,t));else e===`style`?Object.assign(n.style,r):e===`textContent`?n.textContent=r:n.setAttribute(e,r.toString());return n}function wa(e,t,n){let r=Ca(e,t||{});return n?.appendChild(r),r}var Ta=Object.freeze({__proto__:null,createElement:wa,default:wa}),Ea={fetchBlob:function(e,t,n){return $(this,void 0,void 0,(function*(){let r=yield fetch(e,n);if(r.status>=400)throw Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(e,t){$(this,void 0,void 0,(function*(){if(!e.body||!e.headers)return;let n=e.body.getReader(),r=Number(e.headers.get(`Content-Length`))||0,i=0,a=0,o=e=>$(this,void 0,void 0,(function*(){i+=e?.length||0;let n=Math.round(i/r*100);t(n)})),s=()=>$(this,void 0,void 0,(function*(){if(a++>1e5)return void console.error(`Fetcher: Maximum iterations reached, stopping read loop`);let e;try{e=yield n.read()}catch{return}e.done||(o(e.value),yield s())}));s()}))}(r.clone(),t),r.blob()}))}},Da=class extends xa{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement(`audio`),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent(`canplay`,(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||``}revokeSrc(){let e=this.getSrc();e.startsWith(`blob:`)&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==``}setSrc(e,t){let n=this.getSrc();if(e&&n===e)return;this.revokeSrc();let r=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute(`src`),r||e)try{this.media.src=r}catch{this.media.src=e}}destroy(){this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute(`src`),this.media.load(),this.media.remove())}setMediaElement(e){this.media=e}play(){return $(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name===`AbortError`)return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}},Oa=class e extends xa{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragUnsubscribe=null,this.subscriptions=[],this.options=e;let n=this.parentFromOptionsContainer(e.container);this.parent=n;let[r,i]=this.initHtml();n.appendChild(r),this.container=r,this.scrollContainer=i.querySelector(`.scroll`),this.wrapper=i.querySelector(`.wrapper`),this.canvasWrapper=i.querySelector(`.canvases`),this.progressWrapper=i.querySelector(`.progress`),this.cursor=i.querySelector(`.cursor`),t&&i.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e==`string`?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw Error(`Container not found`);return t}initEvents(){let e=e=>{let t=this.wrapper.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;return[n/t.width,r/t.height]};if(this.wrapper.addEventListener(`click`,(t=>{let[n,r]=e(t);this.emit(`click`,n,r)})),this.wrapper.addEventListener(`dblclick`,(t=>{let[n,r]=e(t);this.emit(`dblclick`,n,r)})),!0!==this.options.dragToSeek&&typeof this.options.dragToSeek!=`object`||this.initDrag(),this.scrollContainer.addEventListener(`scroll`,(()=>{let{scrollLeft:e,scrollWidth:t,clientWidth:n}=this.scrollContainer,r=e/t,i=(e+n)/t;this.emit(`scroll`,r,i,e,e+n)})),typeof ResizeObserver==`function`){let e=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{e().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){let e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!==`auto`||(this.lastContainerWidth=e,this.reRender())}initDrag(){this.dragUnsubscribe||(this.dragUnsubscribe=function(e,t,n,r,i=3,a=0,o=100){if(!e)return()=>{};let s=matchMedia(`(pointer: coarse)`).matches,c=()=>{},l=l=>{if(l.button!==a)return;l.preventDefault(),l.stopPropagation();let u=l.clientX,d=l.clientY,f=!1,p=Date.now(),m=r=>{if(r.preventDefault(),r.stopPropagation(),s&&Date.now()-p<o)return;let a=r.clientX,c=r.clientY,l=a-u,m=c-d;if(f||Math.abs(l)>i||Math.abs(m)>i){let{left:r,top:i}=e.getBoundingClientRect();f||=(n?.(u-r,d-i),!0),t(l,m,a-r,c-i),u=a,d=c}},h=t=>{if(f){let n=t.clientX,i=t.clientY,{left:a,top:o}=e.getBoundingClientRect();r?.(n-a,i-o)}c()},g=e=>{e.relatedTarget&&e.relatedTarget!==document.documentElement||h(e)},_=e=>{f&&(e.stopPropagation(),e.preventDefault())},v=e=>{f&&e.preventDefault()};document.addEventListener(`pointermove`,m),document.addEventListener(`pointerup`,h),document.addEventListener(`pointerout`,g),document.addEventListener(`pointercancel`,g),document.addEventListener(`touchmove`,v,{passive:!1}),document.addEventListener(`click`,_,{capture:!0}),c=()=>{document.removeEventListener(`pointermove`,m),document.removeEventListener(`pointerup`,h),document.removeEventListener(`pointerout`,g),document.removeEventListener(`pointercancel`,g),document.removeEventListener(`touchmove`,v),setTimeout((()=>{document.removeEventListener(`click`,_,{capture:!0})}),10)}};return e.addEventListener(`pointerdown`,l),()=>{c(),e.removeEventListener(`pointerdown`,l)}}(this.wrapper,((e,t,n)=>{this.emit(`drag`,Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!0,this.emit(`dragstart`,Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!1,this.emit(`dragend`,Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))})),this.subscriptions.push(this.dragUnsubscribe))}getHeight(e,t){let n=this.audioData?.numberOfChannels||1;if(e==null)return 128;if(!isNaN(Number(e)))return Number(e);if(e===`auto`){let e=this.parent.clientHeight||128;return t?.every((e=>!e.overlay))?e/n:e}return 128}initHtml(){let e=document.createElement(`div`),t=e.attachShadow({mode:`open`}),n=this.options.cspNonce&&typeof this.options.cspNonce==`string`?this.options.cspNonce.replace(/"/g,``):``;return t.innerHTML=`\n      <style${n?` nonce="${n}"`:``}>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class="scroll" part="scroll">\n        <div class="wrapper" part="wrapper">\n          <div class="canvases" part="canvases"></div>\n          <div class="progress" part="progress"></div>\n          <div class="cursor" part="cursor"></div>\n        </div>\n      </div>\n    `,[e,t]}setOptions(e){if(this.options.container!==e.container){let t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}!0!==e.dragToSeek&&typeof this.options.dragToSeek!=`object`||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){let{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((e=>e())),this.container.remove(),this.resizeObserver&&=(this.resizeObserver.disconnect(),null),(e=this.unsubscribeOnScroll)==null||e.forEach((e=>e())),this.unsubscribeOnScroll=[]}createDelay(e=10){let t,n,r=()=>{t&&=(clearTimeout(t),void 0),n&&=(n(),void 0)};return this.timeouts.push(r),()=>new Promise(((i,a)=>{r(),n=a,t=setTimeout((()=>{t=void 0,n=void 0,i()}),e)}))}convertColorValues(e){if(!Array.isArray(e))return e||``;if(e.length===0)return`#999`;if(e.length<2)return e[0]||``;let t=document.createElement(`canvas`),n=t.getContext(`2d`),r=t.height*(window.devicePixelRatio||1),i=n.createLinearGradient(0,0,0,r),a=1/(e.length-1);return e.forEach(((e,t)=>{let n=t*a;i.addColorStop(n,e)})),i}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,t,n,r){let i=e[0],a=e[1]||e[0],o=i.length,{width:s,height:c}=n.canvas,l=c/2,u=this.getPixelRatio(),d=t.barWidth?t.barWidth*u:1,f=t.barGap?t.barGap*u:t.barWidth?d/2:0,p=t.barRadius||0,m=s/(d+f)/o,h=p&&`roundRect`in n?`roundRect`:`rect`;n.beginPath();let g=0,_=0,v=0;for(let e=0;e<=o;e++){let o=Math.round(e*m);if(o>g){let e=Math.round(_*l*r),i=e+Math.round(v*l*r)||1,a=l-e;t.barAlign===`top`?a=0:t.barAlign===`bottom`&&(a=c-i),n[h](g*(d+f),a,d,i,p),g=o,_=0,v=0}let s=Math.abs(i[e]||0),u=Math.abs(a[e]||0);s>_&&(_=s),u>v&&(v=u)}n.fill(),n.closePath()}renderLineWaveform(e,t,n,r){let i=t=>{let i=e[t]||e[0],a=i.length,{height:o}=n.canvas,s=o/2,c=n.canvas.width/a;n.moveTo(0,s);let l=0,u=0;for(let e=0;e<=a;e++){let a=Math.round(e*c);if(a>l){let e=s+(Math.round(u*s*r)||1)*(t===0?-1:1);n.lineTo(l,e),l=a,u=0}let o=Math.abs(i[e]||0);o>u&&(u=o)}n.lineTo(l,s)};n.beginPath(),i(0),i(1),n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(e,n);let r=t.barHeight||1;if(t.normalize){let t=Array.from(e[0]).reduce(((e,t)=>Math.max(e,Math.abs(t))),0);r=t?r/t:r}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,n,r):this.renderLineWaveform(e,t,n,r)}renderSingleCanvas(e,t,n,r,i,a,o){let s=this.getPixelRatio(),c=document.createElement(`canvas`);c.width=Math.round(n*s),c.height=Math.round(r*s),c.style.width=`${n}px`,c.style.height=`${r}px`,c.style.left=`${Math.round(i)}px`,a.appendChild(c);let l=c.getContext(`2d`);if(this.renderWaveform(e,t,l),c.width>0&&c.height>0){let e=c.cloneNode(),n=e.getContext(`2d`);n.drawImage(c,0,0),n.globalCompositeOperation=`source-in`,n.fillStyle=this.convertColorValues(t.progressColor),n.fillRect(0,0,c.width,c.height),o.appendChild(e)}}renderMultiCanvas(t,n,r,i,a,o){let s=this.getPixelRatio(),{clientWidth:c}=this.scrollContainer,l=r/s,u=Math.min(e.MAX_CANVAS_WIDTH,c,l),d={};if(n.barWidth||n.barGap){let e=n.barWidth||.5,t=e+(n.barGap||e/2);u%t!=0&&(u=Math.floor(u/t)*t)}if(u===0)return;let f=e=>{if(e<0||e>=p||d[e])return;d[e]=!0;let r=e*u,s=Math.min(l-r,u);if(n.barWidth||n.barGap){let e=n.barWidth||.5,t=e+(n.barGap||e/2);s=Math.floor(s/t)*t}if(s<=0)return;let c=t.map((e=>{let t=Math.floor(r/l*e.length),n=Math.floor((r+s)/l*e.length);return e.slice(t,n)}));this.renderSingleCanvas(c,n,s,i,r,a,o)},p=Math.ceil(l/u);if(!this.isScrollable){for(let e=0;e<p;e++)f(e);return}let m=this.scrollContainer.scrollLeft/l,h=Math.floor(m*p);if(f(h-1),f(h),f(h+1),p>1){let t=this.on(`scroll`,(()=>{let{scrollLeft:t}=this.scrollContainer,n=Math.floor(t/l*p);Object.keys(d).length>e.MAX_NODES&&(a.innerHTML=``,o.innerHTML=``,d={}),f(n-1),f(n),f(n+1)}));this.unsubscribeOnScroll.push(t)}}renderChannel(e,t,n,r){var{overlay:i}=t,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,[`overlay`]);let o=document.createElement(`div`),s=this.getHeight(a.height,a.splitChannels);o.style.height=`${s}px`,i&&r>0&&(o.style.marginTop=`-${s}px`),this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(o);let c=o.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(e,a,n,s,o,c)}render(e){return $(this,void 0,void 0,(function*(){this.timeouts.forEach((e=>e())),this.timeouts=[],this.canvasWrapper.innerHTML=``,this.progressWrapper.innerHTML=``,this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width==`number`?`${this.options.width}px`:this.options.width);let t=this.getPixelRatio(),n=this.scrollContainer.clientWidth,r=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=r>n;let i=this.options.fillParent&&!this.isScrollable,a=(i?n:r)*t;if(this.wrapper.style.width=i?`100%`:`${r}px`,this.scrollContainer.style.overflowX=this.isScrollable?`auto`:`hidden`,this.scrollContainer.classList.toggle(`noScrollbar`,!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit(`render`),this.options.splitChannels)for(let t=0;t<e.numberOfChannels;t++){let n=Object.assign(Object.assign({},this.options),this.options.splitChannels?.[t]);this.renderChannel([e.getChannelData(t)],n,a,t)}else{let t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),this.renderChannel(t,this.options,a,0)}Promise.resolve().then((()=>this.emit(`rendered`)))}))}reRender(){if(this.unsubscribeOnScroll.forEach((e=>e())),this.unsubscribeOnScroll=[],!this.audioData)return;let{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){let{right:e}=this.progressWrapper.getBoundingClientRect(),n=e-t;n*=2,n=n<0?Math.floor(n):Math.ceil(n),n/=2,this.scrollContainer.scrollLeft+=n}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){let{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,a=e*r,o=n,s=n+i,c=i/2;if(this.isDragging)a+30>s?this.scrollContainer.scrollLeft+=30:a-30<o&&(this.scrollContainer.scrollLeft-=30);else{(a<o||a>s)&&(this.scrollContainer.scrollLeft=a-(this.options.autoCenter?c:0));let e=a-n-c;t&&this.options.autoCenter&&e>0&&(this.scrollContainer.scrollLeft+=Math.min(e,10))}{let e=this.scrollContainer.scrollLeft,t=e/r,n=(e+i)/r;this.emit(`scroll`,t,n,e,e+i)}}renderProgress(e,t){if(isNaN(e))return;let n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:``,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,t)}exportImage(e,t,n){return $(this,void 0,void 0,(function*(){let r=this.canvasWrapper.querySelectorAll(`canvas`);if(!r.length)throw Error(`No waveform data`);if(n===`dataURL`){let n=Array.from(r).map((n=>n.toDataURL(e,t)));return Promise.resolve(n)}return Promise.all(Array.from(r).map((n=>new Promise(((r,i)=>{n.toBlob((e=>{e?r(e):i(Error(`Could not export image`))}),e,t)})))))}))}};Oa.MAX_CANVAS_WIDTH=8e3,Oa.MAX_NODES=10;var ka=class extends xa{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;let e=()=>{this.isRunning&&(this.emit(`tick`),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}},Aa=class extends xa{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc=``,this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return $(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit(`emptied`);fetch(e).then((t=>{if(t.status>=400)throw Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc===e?this.audioContext.decodeAudioData(t):null)).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit(`loadedmetadata`),this.emit(`canplay`),this.autoplay&&this.play())}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit(`ended`))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)==null||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return $(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit(`play`))}))}pause(){this.paused||(this._pause(),this.emit(`pause`))}stopAt(e){let t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener(`ended`,(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return $(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){let t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit(`seeking`),this.emit(`timeupdate`)}get duration(){return this._duration??(this.buffer?.duration||0)}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit(`volumechange`)}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){let e=[];if(!this.buffer)return e;let t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case`src`:this.src=``;break;case`playbackRate`:this.playbackRate=0;break;case`currentTime`:this.currentTime=0;break;case`duration`:this.duration=0;break;case`volume`:this.volume=0;break;case`muted`:this.muted=!1}}},ja={waveColor:`#999`,progressColor:`#555`,cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3},Ma=class e extends Da{static create(t){return new e(t)}constructor(e){let t=e.media||(e.backend===`WebAudio`?new Aa:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},ja,e),this.timer=new ka;let n=t?void 0:this.getMediaElement();this.renderer=new Oa(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();let r=this.options.url||this.getSrc()||``;Promise.resolve().then((()=>{this.emit(`init`);let{peaks:e,duration:t}=this.options;(r||e&&t)&&this.load(r,e,t).catch((e=>{console.error(`WaveSurfer initial load error:`,e)}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on(`tick`,(()=>{if(!this.isSeeking()){let e=this.updateProgress();this.emit(`timeupdate`,e),this.emit(`audioprocess`,e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit(`play`),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent(`timeupdate`,(()=>{let e=this.updateProgress();this.emit(`timeupdate`,e)})),this.onMediaEvent(`play`,(()=>{this.emit(`play`),this.timer.start()})),this.onMediaEvent(`pause`,(()=>{this.emit(`pause`),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent(`emptied`,(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent(`ended`,(()=>{this.emit(`timeupdate`,this.getDuration()),this.emit(`finish`),this.stopAtPosition=null})),this.onMediaEvent(`seeking`,(()=>{this.emit(`seeking`,this.getCurrentTime())})),this.onMediaEvent(`error`,(()=>{this.emit(`error`,this.getMediaElement().error??Error(`Media error`)),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on(`click`,((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit(`interaction`,e*this.getDuration()),this.emit(`click`,e,t))})),this.renderer.on(`dblclick`,((e,t)=>{this.emit(`dblclick`,e,t)})),this.renderer.on(`scroll`,((e,t,n,r)=>{let i=this.getDuration();this.emit(`scroll`,e*i,t*i,n,r)})),this.renderer.on(`render`,(()=>{this.emit(`redraw`)})),this.renderer.on(`rendered`,(()=>{this.emit(`redrawcomplete`)})),this.renderer.on(`dragstart`,(e=>{this.emit(`dragstart`,e)})),this.renderer.on(`dragend`,(e=>{this.emit(`dragend`,e)})));{let e,t=this.renderer.on(`drag`,(t=>{if(!this.options.interact)return;let n;this.renderer.renderProgress(t),clearTimeout(e),this.isPlaying()?n=0:!0===this.options.dragToSeek?n=200:typeof this.options.dragToSeek==`object`&&this.options.dragToSeek!==void 0&&(n=this.options.dragToSeek.debounceTime),e=setTimeout((()=>{this.seekTo(t)}),n),this.emit(`interaction`,t*this.getDuration()),this.emit(`drag`,t)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;(e=this.options.plugins)!=null&&e.length&&this.options.plugins.forEach((e=>{this.registerPlugin(e)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Sa.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Sa.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);let t=e.once(`destroy`,(()=>{this.plugins=this.plugins.filter((t=>t!==e)),this.subscriptions=this.subscriptions.filter((e=>e!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){let t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,r){return $(this,void 0,void 0,(function*(){var i;if(this.emit(`load`,e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(i=this.abortController)==null||i.abort(),this.abortController=null,!t&&!n){let n=this.options.fetchParams||{};window.AbortController&&!n.signal&&(this.abortController=new AbortController,n.signal=this.abortController.signal),t=yield Ea.fetchBlob(e,e=>this.emit(`loading`,e),n);let r=this.options.blobMimeType;r&&(t=new Blob([t],{type:r}))}this.setSrc(e,t);let a=yield new Promise((e=>{let t=r||this.getDuration();t?e(t):this.mediaSubscriptions.push(this.onMediaEvent(`loadedmetadata`,(()=>e(this.getDuration())),{once:!0}))}));if(!e&&!t){let e=this.getMediaElement();e instanceof Aa&&(e.duration=a)}if(n)this.decodedData=Sa.createBuffer(n,a||0);else if(t){let e=yield t.arrayBuffer();this.decodedData=yield Sa.decode(e,this.options.sampleRate)}this.decodedData&&(this.emit(`decode`,this.getDuration()),this.renderer.render(this.decodedData)),this.emit(`ready`,this.getDuration())}))}load(e,t,n){return $(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(e){throw this.emit(`error`,e),e}}))}loadBlob(e,t,n){return $(this,void 0,void 0,(function*(){try{return yield this.loadAudio(``,e,t,n)}catch(e){throw this.emit(`error`,e),e}}))}zoom(e){if(!this.decodedData)throw Error(`No audio loaded`);this.renderer.zoom(e),this.emit(`zoom`,e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw Error(`The audio has not been decoded yet`);let r=Math.min(e,this.decodedData.numberOfChannels),i=[];for(let e=0;e<r;e++){let r=this.decodedData.getChannelData(e),a=[],o=r.length/t;for(let e=0;e<t;e++){let t=r.slice(Math.floor(e*o),Math.ceil((e+1)*o)),i=0;for(let e=0;e<t.length;e++){let n=t[e];Math.abs(n)>Math.abs(i)&&(i=n)}a.push(Math.round(i*n)/n)}i.push(a)}return i}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit(`timeupdate`,e)}seekTo(e){let t=this.getDuration()*e;this.setTime(t)}play(e,t){let n=Object.create(null,{play:{get:()=>super.play}});return $(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);let r=yield n.play.call(this);return t!=null&&(this.media instanceof Aa?this.media.stopAt(t):this.stopAtPosition=t),r}))}playPause(){return $(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load(``,[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return $(this,arguments,void 0,(function*(e=`image/png`,t=1,n=`dataURL`){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit(`destroy`),(e=this.abortController)==null||e.abort(),this.plugins.forEach((e=>e.destroy())),this.subscriptions.forEach((e=>e())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};Ma.BasePlugin=class extends xa{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&=(this.subscriptions=[],!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit(`destroy`),this.subscriptions.forEach((e=>e())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},Ma.dom=Ta;var Na=class{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){let n=(...r)=>{this.un(e,n),t(...r)};return this.listeners[e].add(n),()=>this.un(e,n)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])==null||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((e=>e(...t)))}},Pa=class extends Na{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&=(this.subscriptions=[],!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit(`destroy`),this.subscriptions.forEach((e=>e())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}};function Fa(e,t){let n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(let[e,r]of Object.entries(t))if(e===`children`&&r)for(let[e,t]of Object.entries(r))t instanceof Node?n.appendChild(t):typeof t==`string`?n.appendChild(document.createTextNode(t)):n.appendChild(Fa(e,t));else e===`style`?Object.assign(n.style,r):e===`textContent`?n.textContent=r:n.setAttribute(e,r.toString());return n}function Ia(e,t,n){let r=Fa(e,t||{});return n?.appendChild(r),r}var La={lineWidth:1,labelSize:11,labelPreferLeft:!1,formatTimeCallback:e=>`${Math.floor(e/60)}:${`0${Math.floor(e)%60}`.slice(-2)}`},Ra=class e extends Pa{constructor(e){super(e||{}),this.lastPointerPosition=null,this.unsubscribe=()=>{},this.onPointerMove=e=>{if(!this.wavesurfer)return;this.lastPointerPosition={clientX:e.clientX,clientY:e.clientY};let t=this.wavesurfer.getWrapper().getBoundingClientRect(),{width:n}=t,r=e.clientX-t.left,i=Math.min(1,Math.max(0,r/n)),a=Math.min(n-this.options.lineWidth-1,r);this.wrapper.style.transform=`translateX(${a}px)`,this.wrapper.style.opacity=`1`;let o=this.wavesurfer.getDuration()||0;this.label.textContent=this.options.formatTimeCallback(o*i);let s=this.label.offsetWidth,c=this.options.labelPreferLeft?a-s>0:a+s>n;this.label.style.transform=c?`translateX(-${s+this.options.lineWidth}px)`:``,this.emit(`hover`,i)},this.onPointerLeave=()=>{this.wrapper.style.opacity=`0`,this.lastPointerPosition=null},this.options=Object.assign({},La,e),this.wrapper=Ia(`div`,{part:`hover`}),this.label=Ia(`span`,{part:`hover-label`},this.wrapper)}static create(t){return new e(t)}addUnits(e){return`${e}${typeof e==`number`?`px`:``}`}onInit(){if(!this.wavesurfer)throw Error(`WaveSurfer is not initialized`);let e=this.wavesurfer.options,t=this.options.lineColor||e.cursorColor||e.progressColor;Object.assign(this.wrapper.style,{position:`absolute`,zIndex:10,left:0,top:0,height:`100%`,pointerEvents:`none`,borderLeft:`${this.addUnits(this.options.lineWidth)} solid ${t}`,opacity:`0`,transition:`opacity .1s ease-in`}),Object.assign(this.label.style,{display:`block`,backgroundColor:this.options.labelBackground,color:this.options.labelColor,fontSize:`${this.addUnits(this.options.labelSize)}`,transition:`transform .1s ease-in`,padding:`2px 3px`});let n=this.wavesurfer.getWrapper();n.appendChild(this.wrapper);let r=()=>{this.lastPointerPosition&&this.onPointerMove(this.lastPointerPosition)},i=this.wavesurfer.on(`zoom`,r),a=this.wavesurfer.on(`scroll`,r);n.addEventListener(`pointermove`,this.onPointerMove),n.addEventListener(`pointerleave`,this.onPointerLeave),this.unsubscribe=()=>{n.removeEventListener(`pointermove`,this.onPointerMove),n.removeEventListener(`pointerleave`,this.onPointerLeave),i(),a()}}destroy(){super.destroy(),this.unsubscribe(),this.wrapper.remove()}},za=e=>e;function Ba(e,{delay:t=0,duration:n=400,easing:r=za}={}){let i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>`opacity: ${e*i}`}}var Va=(e,t,n)=>{I(t,!0),n(),document.getElementById(`download`).click()},Ha=(e,t)=>{I(t,!1)},Ua=Y(`<label class="blocker svelte-1n46o8q" for="closeDownloadAnnouncer"><h1 class="svelte-1n46o8q">Thanks for downloading my beat!</h1> <h2 class="svelte-1n46o8q">All of my beats are completely free</h2> <h2 class="svelte-1n46o8q">If you make a song with one of my beats, let me know!</h2> <h2 class="svelte-1n46o8q">If you want a higher quality version, or some minor changes to the beat, just DM me on Instagram</h2> <h2 class="svelte-1n46o8q">@royalmadethat</h2></label> <button id="closeDownloadAnnouncer" class="invis svelte-1n46o8q">Close download announcer</button>`,1),Wa=Y(`<p class="svelte-1n46o8q"> </p>`),Ga=Y(`<p class="svelte-1n46o8q"> </p> <p class="svelte-1n46o8q"> </p>`,1),Ka=Yn(`<svg fill="currentColor" class="bigSvg hover" style="cursor: pointer" viewBox="0 0 1289 1289" width="20" height="20"><path d="M207,1228V65c-1-18,5-33,18-46S253,0,272,0s33,6,46,19c12,13,18,28,18,46l1,1163c0,17-6,32-19,43-13,12-28,18-46,18s-33-6-46-17-19-26-19-44ZM922,1228V65c0-18,6-33,19-46S969,0,988,0s33,6,46,19c12,13,18,28,18,46l1,1163c0,17-6,32-19,43-13,12-28,18-46,18s-34-6-47-17-19-26-19-44Z"></path></svg>`),qa=Yn(`<svg fill="currentColor" class="bigSvg hover" style="cursor: pointer" viewBox="0 0 1289 1289" width="20" height="20"><path d="M7.5,1235V62c0-12,2-21,6-26,5-11,13-20,23-26C46.5,3,57.5,0,68.5,0s19,2,30,7l1150,574c12,5,22,13,29,24,7,10,10,22,10,35s-3,25-10,36-17,19-30,24L98.5,1290c-7,3-14,5-21,5-11,0-23-3-36-10-22-11-33-28-34-50ZM1079.5,643L121.5,161v972l958-490Z"></path></svg>`),Ja=Y(`<!> <div class="globalContainer svelte-1n46o8q"><div class="container svelte-1n46o8q"><!></div> <div class="playbar svelte-1n46o8q"><div class="wvContainer svelte-1n46o8q" id="playbar"></div> <div class="infoBar svelte-1n46o8q"><!></div> <div class="infoBar svelte-1n46o8q" style="max-width: 250px;"><!></div> <div class="infoBar svelte-1n46o8q"><button class="svelte-1n46o8q"><svg class="controlSvg" viewBox="0 0 1356 1356" fill="currentColor" width="20" height="20"><path d="M611,903l-335-341c-13-13-29-20-46-20s-33,7-46,20-20,29-20,46,7,33,21,47l440,446,6,7c7,8,17,14,29,17l10,2c21,2,40-5,55-21l457-455c13-13,20-29,20-47s-6-33-19-46-29-20-46-20-34,7-47,20l-347,347V67c0-19-6-35-19-48S696,0,677,0s-33,6-46,19-20,29-20,48v836ZM1252,1224H104c-19,0-35,6-48,19s-19,28-19,47,6,33,19,46,29,20,48,20h1148c19,0,35-7,48-20s19-28,19-46-6-34-19-47-29-19-48-19Z"></path></svg></button> <button class="svelte-1n46o8q"><!></button> <button class="svelte-1n46o8q"><svg class="inlineSvg" fill="currentColor" viewBox="0 0 1293 1293" width="20" height="20" style="transform: rotate(45deg);"><path d="M708,581.5V66.5c0-19-6-34-19-47S660,.5,642,.5s-34,6-47,19-20,29-20,47v515H66c-19,0-34,7-47,20S0,630.5,0,649.5s7,32,20,45,28,20,46,20h509v512c0,19,7,34,20,47s28,19,47,19,34-7,47-20,19-28,19-46v-512h518c19,0,35-6,48-19s19-28,19-46-6-35-19-48-29-20-48-20h-518Z"></path></svg></button></div></div></div> <a id="download" class="invis">Bleh</a>`,1);function Ya(e,t){De(t,!0);let n=F(void 0);ti(()=>{I(n,Ma.create({container:`#playbar`,waveColor:Z.textColor,progressColor:Z.mainColor,barWidth:2,barGap:1,height:`auto`,barRadius:2,url:``,plugins:[Ra.create({lineColor:`#ff0000`,lineWidth:2,labelBackground:Z.dimMainColor,labelColor:Z.textColor,labelSize:`11px`,labelPreferLeft:!1})]}),!0),q(n).on(`ready`,()=>{q(n).play(),Q.playing=!0}),q(n).on(`finish`,()=>{Q.playing=!1});let e={"--text-color":Z.textColor,"--main-color":Z.mainColor,"--light-main-color":Z.lightMainColor,"--dim-main-color":Z.dimMainColor,"--gray-color":Z.grayColor,"--input-color":Z.inputColor,"--bg-color":Z.bgColor,"--light-bg-color":Z.lightBgColor,"--lighter-bg-color":Z.lighterBgColor,"--fail-color":Z.fail};for(let[t,n]of Object.entries(e))document.documentElement.style.setProperty(t,`${n}`)}),Wt(()=>{Q.triggerUpdate&&=(q(n).pause(),q(n).load(Q.url),Q.out=!0,!1)});let r=()=>{Q.playing?(q(n).pause(),Q.playing=!1):(q(n).play(),Q.playing=!0)},i=()=>{q(n).pause(),Q.out=!1},a=F(!1),o=ut(()=>Q.url+`?download=1`);var s=Ja(),c=Mt(s),l=e=>{var t=Ua(),n=Mt(t),r=R(n,2);r.__click=[Ha,a],Lr(3,n,()=>Ba,()=>({duration:250})),X(e,t)};rr(c,e=>{q(a)&&e(l)});var u=R(c,2),d=L(u),f=L(d);pi(f,{get routes(){return ba}}),j(d);var p=R(d,2),m=R(L(p),2),h=L(m),g=e=>{var t=Wa(),n=L(t,!0);j(t),$t(()=>Qn(n,Q.beat.Name)),X(e,t)};rr(h,e=>{Q.beat!=null&&e(g)}),j(m);var _=R(m,2),v=L(_),y=e=>{var t=Ga(),n=Mt(t),r=L(n);j(n);var i=R(n,2),a=L(i);j(i),$t(()=>{Qn(r,`${Q.beat.bpm??``}bpm`),Qn(a,`${Q.beat.key??``} ${Q.beat.isMajor?`Major`:`Minor`}`)}),X(e,t)};rr(v,e=>{Q.beat!=null&&e(y)}),j(_);var b=R(_,2),x=L(b);x.__click=[Va,a,i];var S=R(x,2);S.__click=r;var C=L(S),w=e=>{var t=Ka();X(e,t)},ee=e=>{var t=qa();X(e,t)};rr(C,e=>{Q.playing?e(w):e(ee,!1)}),j(S);var te=R(S,2);te.__click=i,j(b),j(p),j(u);var T=R(u,2);$t(()=>{xr(p,Q.out?``:`bottom: -200px;`),Tr(T,`href`,q(o))}),X(e,s),Oe()}Un([`click`]),$n(Ya,{target:document.getElementById(`app`)});